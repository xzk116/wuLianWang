import{d as e,aA as a,aE as r,ag as l,o,r as t,c as s,bB as i,ap as n,g as d,f as p,C as u,m,F as c,i as f,w as g,E as x,$ as v,e as h,a0 as _,ay as y}from"./index.Cr6LiOEA.js";import{E as j}from"./divider.CJ9SWRVy.js";import{E as w}from"./text.CDYNb35D.js";import{E as b,a as C}from"./form-item.Btm0Q9hg.js";import{E as V}from"./button.DA5Tbsy5.js";import{E as k}from"./link.C2QBKPuV.js";import{E as q}from"./checkbox.RcPxOF1z.js";/* empty css                */import{E}from"./popper.DUX4kj8Y.js";import{E as M}from"./input.CzloNZpJ.js";import{C as U}from"./index.DifP0qCl.js";import"./use-form-common-props.DIXoHrYE.js";import"./castArray.DJP_EBIZ.js";import"./error.D_Dr4eZ1.js";import"./index.BTKOuuO-.js";import"./_Uint8Array.DfZsIPxq.js";import"./_arrayPush.SNmfCKIy.js";import"./_initCloneObject.Bij3KvOA.js";import"./index.CQ7fRGMW.js";import"./index.BRcqeMdH.js";import"./event.BwRzfsZt.js";import"./isEqual.pX8OdxIr.js";import"./index.B8EKF3Rk.js";import"./isUndefined.DgmxjSXK.js";import"./index.CSj7d93O.js";import"./index.BMVWqwaD.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";const K={"text-center":"","m-0":"","mb-20px":""},L={flex:""},z=["src"],A={class:"flex-x-between w-full"},B={"flex-center":"","gap-10px":""},P={class:"flex-center gap-x-5 w-full text-[var(--el-text-color-secondary)]"},F=e({__name:"Login",emits:["update:modelValue"],setup(e,{emit:F}){const{t:R}=a(),S=r(),G=l();o((()=>J()));const I=t(),O=t(!1),Q=t(!1),T=t(),$=t({username:"admin",password:"123456",captchaKey:"",captchaCode:"",rememberMe:!1}),D=s((()=>({username:[{required:!0,trigger:"blur",message:R("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:R("login.message.password.required")},{min:6,message:R("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:R("login.message.captchaCode.required")}]}))),H=t(!1);function J(){H.value=!0,i.getCaptcha().then((e=>{$.value.captchaKey=e.captchaKey,T.value=e.captchaBase64})).finally((()=>H.value=!1))}async function N(){var e;try{if(!(await(null==(e=I.value)?void 0:e.validate())))return;O.value=!0,await S.login($.value),await S.getUserInfo();const a=function(e){const a="/",r=e.redirect||a;try{const e=y.resolve(r);return{path:e.path,query:e.query}}catch{return{path:a}}}(G.query);await y.push(a)}catch(a){J()}finally{O.value=!1}}function W(e){e instanceof KeyboardEvent&&(Q.value=e.getModifierState("CapsLock"))}const X=F;function Y(e){X("update:modelValue",e)}return(e,a)=>{const r=n("User"),l=x,o=M,t=b,s=n("Lock"),i=E,y=n("Loading"),F=q,S=k,G=V,X=C,Z=w,ee=j;return p(),d("div",null,[u("h3",K,c(f(R)("login.login")),1),m(X,{ref_key:"loginFormRef",ref:I,model:f($),rules:f(D),size:"large"},{default:g((()=>[m(t,{prop:"username"},{default:g((()=>[m(o,{modelValue:f($).username,"onUpdate:modelValue":a[0]||(a[0]=e=>f($).username=e),modelModifiers:{trim:!0},placeholder:f(R)("login.username")},{prefix:g((()=>[m(l,null,{default:g((()=>[m(r)])),_:1})])),_:1},8,["modelValue","placeholder"])])),_:1}),m(i,{visible:f(Q),content:f(R)("login.capsLock"),placement:"right"},{default:g((()=>[m(t,{prop:"password"},{default:g((()=>[m(o,{modelValue:f($).password,"onUpdate:modelValue":a[1]||(a[1]=e=>f($).password=e),modelModifiers:{trim:!0},placeholder:f(R)("login.password"),type:"password","show-password":"",onKeyup:[W,v(N,["enter"])]},{prefix:g((()=>[m(l,null,{default:g((()=>[m(s)])),_:1})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1},8,["visible","content"]),m(t,{prop:"captchaCode"},{default:g((()=>[u("div",L,[m(o,{modelValue:f($).captchaCode,"onUpdate:modelValue":a[2]||(a[2]=e=>f($).captchaCode=e),modelModifiers:{trim:!0},placeholder:f(R)("login.captchaCode"),onKeyup:v(N,["enter"])},{prefix:g((()=>a[6]||(a[6]=[u("div",{class:"i-svg:captcha"},null,-1)]))),_:1},8,["modelValue","placeholder"]),u("div",{"cursor-pointer":"",h:"[40px]",w:"[120px]","flex-center":"","ml-10px":"",onClick:J},[f(H)?(p(),h(l,{key:0,class:"is-loading"},{default:g((()=>[m(y)])),_:1})):(p(),d("img",{key:1,"object-cover":"","border-rd-4px":"","p-1px":"",shadow:"[0_0_0_1px_var(--el-border-color)_inset]",src:f(T),alt:"code"},null,8,z))])])])),_:1}),u("div",A,[m(F,{modelValue:f($).rememberMe,"onUpdate:modelValue":a[3]||(a[3]=e=>f($).rememberMe=e)},{default:g((()=>[_(c(f(R)("login.rememberMe")),1)])),_:1},8,["modelValue"]),m(S,{type:"primary",underline:!1,onClick:a[4]||(a[4]=e=>Y("resetPwd"))},{default:g((()=>[_(c(f(R)("login.forgetPassword")),1)])),_:1})]),m(t,null,{default:g((()=>[m(G,{loading:f(O),type:"primary",class:"w-full",onClick:N},{default:g((()=>[_(c(f(R)("login.login")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"]),u("div",B,[m(Z,{size:"default"},{default:g((()=>[_(c(f(R)("login.noAccount")),1)])),_:1}),m(S,{type:"primary",underline:!1,onClick:a[5]||(a[5]=e=>Y("register"))},{default:g((()=>[_(c(f(R)("login.reg")),1)])),_:1})]),m(ee,null,{default:g((()=>[m(Z,{size:"small"},{default:g((()=>[_(c(f(R)("login.otherLoginMethods")),1)])),_:1})])),_:1}),u("div",P,[m(U,null,{default:g((()=>a[7]||(a[7]=[u("div",{"text-20px":"",class:"i-svg:wechat"},null,-1)]))),_:1}),m(U,null,{default:g((()=>a[8]||(a[8]=[u("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:qq"},null,-1)]))),_:1}),m(U,null,{default:g((()=>a[9]||(a[9]=[u("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:github"},null,-1)]))),_:1}),m(U,null,{default:g((()=>a[10]||(a[10]=[u("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:gitee"},null,-1)]))),_:1})])])}}});export{F as default};
