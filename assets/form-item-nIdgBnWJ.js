import{a as e,h as t,f as r,d as a}from"./use-form-common-props-CfY8xk-s.js";import{c7 as l,co as o,ch as i,c8 as s,cz as n,a9 as u,L as c,bc as d,t as v,z as f,a$ as p,r as b,c as m,_ as h,d as g,b as y,I as j,y as w,S as A,bx as S,g as F,f as I,l as x,n as O,i as W,b9 as B,A as k,o as M,a6 as E,bL as P,ab as $,m as q,P as L,U as V,bm as U,cA as C,J as _,cB as R,C as z,w as D,e as N,h as G,D as T,k as J,a0 as H,F as K,by as Q,q as X,G as Y}from"./index-BZPYVMdZ.js";import{c as Z}from"./castArray-Dhq8PbBm.js";import{d as ee,t as te}from"./error-D_Dr4eZ1.js";import{S as re}from"./index-BTKOuuO-.js";import{k as ae,g as le,s as oe,b as ie,a as se,c as ne,n as ue,i as ce,d as de,e as ve}from"./Uint8Array-COfKfiL_.js";import{c as fe,k as pe,g as be,a as me,b as he,d as ge,e as ye,i as je}from"./initCloneObject-TgRpAVf4.js";import{a as we}from"./arrayPush-BDpBx9Er.js";var Ae=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)we(t,le(e)),e=be(e);return t}:oe;function Se(e){return ie(e,pe,Ae)}var Fe=Object.prototype.hasOwnProperty;var Ie=/\w*$/;var xe=l?l.prototype:void 0,Oe=xe?xe.valueOf:void 0;function We(e,t,r){var a,l,o,i=e.constructor;switch(t){case"[object ArrayBuffer]":return me(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var r=t?me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return he(e,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(o=new(l=e).constructor(l.source,Ie.exec(l))).lastIndex=l.lastIndex,o;case"[object Symbol]":return a=e,Oe?Object(Oe.call(a)):{}}}var Be=ue&&ue.isMap,ke=Be?ne(Be):function(e){return o(e)&&"[object Map]"==se(e)};var Me=ue&&ue.isSet,Ee=Me?ne(Me):function(e){return o(e)&&"[object Set]"==se(e)},Pe="[object Arguments]",$e="[object Function]",qe="[object Object]",Le={};function Ve(e,t,r,a,l,o){var u,c=1&t,d=2&t,v=4&t;if(void 0!==u)return u;if(!i(e))return e;var f=s(e);if(f){if(u=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Fe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!c)return ge(e,u)}else{var p=se(e),b=p==$e||"[object GeneratorFunction]"==p;if(ce(e))return ye(e,c);if(p==qe||p==Pe||b&&!l){if(u=d||b?{}:je(e),!c)return d?function(e,t){return fe(e,Ae(e),t)}(e,function(e,t){return e&&fe(t,pe(t),e)}(u,e)):function(e,t){return fe(e,le(e),t)}(e,function(e,t){return e&&fe(t,ae(t),e)}(u,e))}else{if(!Le[p])return l?e:{};u=We(e,p,c)}}o||(o=new de);var m=o.get(e);if(m)return m;o.set(e,u),Ee(e)?e.forEach((function(a){u.add(Ve(a,t,r,a,e,o))})):ke(e)&&e.forEach((function(a,l){u.set(l,Ve(a,t,r,l,e,o))}));var h=f?void 0:(v?d?Se:ve:d?pe:ae)(e);return function(e,t){for(var r=-1,a=null==e?0:e.length;++r<a&&!1!==t(e[r],r,e););}(h||e,(function(a,l){h&&(a=e[l=a]),n(u,l,Ve(a,t,r,l,e,o))})),u}Le[Pe]=Le["[object Array]"]=Le["[object ArrayBuffer]"]=Le["[object DataView]"]=Le["[object Boolean]"]=Le["[object Date]"]=Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Map]"]=Le["[object Number]"]=Le[qe]=Le["[object RegExp]"]=Le["[object Set]"]=Le["[object String]"]=Le["[object Symbol]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le["[object Error]"]=Le[$e]=Le["[object WeakMap]"]=!1;function Ue(e){return Ve(e,4)}const Ce=v({size:{type:String,values:p},disabled:Boolean}),_e=v({...Ce,model:Object,rules:{type:f(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),Re={validate:(e,t,r)=>(u(e)||c(e))&&d(t)&&c(r)};function ze(){const e=b([]),t=m((()=>{if(!e.value.length)return"0";const t=Math.max(...e.value);return t?`${t}px`:""}));function r(r){const a=e.value.indexOf(r);return-1===a&&t.value,a}return{autoLabelWidth:t,registerLabelWidth:function(t,a){if(t&&a){const l=r(a);e.value.splice(l,1,t)}else t&&e.value.push(t)},deregisterLabelWidth:function(t){const a=r(t);a>-1&&e.value.splice(a,1)}}}const De=(e,t)=>{const r=Z(t);return r.length>0?e.filter((e=>e.prop&&r.includes(e.prop))):e},Ne=g({name:"ElForm"});var Ge=h(g({...Ne,props:_e,emits:Re,setup(r,{expose:a,emit:l}){const o=r,i=[],s=e(),n=y("form"),u=m((()=>{const{labelPosition:e,inline:t}=o;return[n.b(),n.m(s.value||"default"),{[n.m(`label-${e}`)]:e,[n.m("inline")]:t}]})),c=(e=[])=>{o.model&&De(i,e).forEach((e=>e.resetField()))},d=(e=[])=>{De(i,e).forEach((e=>e.clearValidate()))},v=m((()=>!!o.model)),f=async e=>b(void 0,e),p=async(e=[])=>{if(!v.value)return!1;const t=(e=>{if(0===i.length)return[];const t=De(i,e);return t.length?t:[]})(e);if(0===t.length)return!0;let r={};for(const l of t)try{await l.validate(""),"error"===l.validateState&&l.resetField()}catch(a){r={...r,...a}}return 0===Object.keys(r).length||Promise.reject(r)},b=async(e=[],t)=>{const r=!B(t);try{const r=await p(e);return!0===r&&await(null==t?void 0:t(r)),r}catch(a){if(a instanceof Error)throw a;const e=a;return o.scrollToError&&h(Object.keys(e)[0]),await(null==t?void 0:t(!1,e)),r&&Promise.reject(e)}},h=e=>{var t;const r=De(i,e)[0];r&&(null==(t=r.$el)||t.scrollIntoView(o.scrollIntoViewOptions))};return j((()=>o.rules),(()=>{o.validateOnRuleChange&&f().catch((e=>ee()))}),{deep:!0,flush:"post"}),w(t,A({...S(o),emit:l,resetFields:c,clearValidate:d,validateField:b,getField:e=>i.find((t=>t.prop===e)),addField:e=>{i.push(e)},removeField:e=>{e.prop&&i.splice(i.indexOf(e),1)},...ze()})),a({validate:f,validateField:b,resetFields:c,clearValidate:d,scrollToField:h,fields:i}),(e,t)=>(I(),F("form",{class:O(W(u))},[x(e.$slots,"default")],2))}}),[["__file","form.vue"]]);const Te=v({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:f([String,Array])},required:{type:Boolean,default:void 0},rules:{type:f([Object,Array])},error:String,validateStatus:{type:String,values:["","error","validating","success"]},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:p}}),Je="ElLabelWrap";var He=g({name:Je,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:a}){const l=k(t,void 0),o=k(r);o||te(Je,"usage: <el-form-item><label-wrap /></el-form-item>");const i=y("form"),s=b(),n=b(0),u=(t="update")=>{V((()=>{a.default&&e.isAutoWidth&&("update"===t?n.value=(()=>{var e;if(null==(e=s.value)?void 0:e.firstElementChild){const e=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(e))}return 0})():"remove"===t&&(null==l||l.deregisterLabelWidth(n.value)))}))},c=()=>u("update");return M((()=>{c()})),E((()=>{u("remove")})),P((()=>c())),j(n,((t,r)=>{e.updateAll&&(null==l||l.registerLabelWidth(t,r))})),$(m((()=>{var e,t;return null!=(t=null==(e=s.value)?void 0:e.firstElementChild)?t:null})),c),()=>{var t,r;if(!a)return null;const{isAutoWidth:u}=e;if(u){const e=null==l?void 0:l.autoLabelWidth,r={};if((null==o?void 0:o.hasLabel)&&e&&"auto"!==e){const t=Math.max(0,Number.parseInt(e,10)-n.value),a=o.labelPosition||l.labelPosition;t&&(r["left"===a?"marginRight":"marginLeft"]=`${t}px`)}return q("div",{ref:s,class:[i.be("item","label-wrap")],style:r},[null==(t=a.default)?void 0:t.call(a)])}return q(L,{ref:s},[null==(r=a.default)?void 0:r.call(a)])}}});const Ke=g({name:"ElFormItem"});var Qe=h(g({...Ke,props:Te,setup(l,{expose:o}){const i=l,s=U(),n=k(t,void 0),v=k(r,void 0),f=e(void 0,{formItem:!1}),p=y("form-item"),h=a().value,g=b([]),P=b(""),$=C(P,100),L=b(""),X=b();let Y,ee=!1;const te=m((()=>i.labelPosition||(null==n?void 0:n.labelPosition))),ae=m((()=>{if("top"===te.value)return{};const e=_(i.labelWidth||(null==n?void 0:n.labelWidth)||"");return e?{width:e}:{}})),le=m((()=>{if("top"===te.value||(null==n?void 0:n.inline))return{};if(!i.label&&!i.labelWidth&&ve)return{};const e=_(i.labelWidth||(null==n?void 0:n.labelWidth)||"");return i.label||s.label?{}:{marginLeft:e}})),oe=m((()=>[p.b(),p.m(f.value),p.is("error","error"===P.value),p.is("validating","validating"===P.value),p.is("success","success"===P.value),p.is("required",me.value||i.required),p.is("no-asterisk",null==n?void 0:n.hideRequiredAsterisk),"right"===(null==n?void 0:n.requireAsteriskPosition)?"asterisk-right":"asterisk-left",{[p.m("feedback")]:null==n?void 0:n.statusIcon,[p.m(`label-${te.value}`)]:te.value}])),ie=m((()=>d(i.inlineMessage)?i.inlineMessage:(null==n?void 0:n.inlineMessage)||!1)),se=m((()=>[p.e("error"),{[p.em("error","inline")]:ie.value}])),ne=m((()=>i.prop?c(i.prop)?i.prop:i.prop.join("."):"")),ue=m((()=>!(!i.label&&!s.label))),ce=m((()=>i.for||(1===g.value.length?g.value[0]:void 0))),de=m((()=>!ce.value&&ue.value)),ve=!!v,fe=m((()=>{const e=null==n?void 0:n.model;if(e&&i.prop)return R(e,i.prop).value})),pe=m((()=>{const{required:e}=i,t=[];i.rules&&t.push(...Z(i.rules));const r=null==n?void 0:n.rules;if(r&&i.prop){const e=R(r,i.prop).value;e&&t.push(...Z(e))}if(void 0!==e){const r=t.map(((e,t)=>[e,t])).filter((([e])=>Object.keys(e).includes("required")));if(r.length>0)for(const[a,l]of r)a.required!==e&&(t[l]={...a,required:e});else t.push({required:e})}return t})),be=m((()=>pe.value.length>0)),me=m((()=>pe.value.some((e=>e.required)))),he=m((()=>{var e;return"error"===$.value&&i.showMessage&&(null==(e=null==n?void 0:n.showMessage)||e)})),ge=m((()=>`${i.label||""}${(null==n?void 0:n.labelSuffix)||""}`)),ye=e=>{P.value=e},je=async e=>{const t=ne.value;return new re({[t]:e}).validate({[t]:fe.value},{firstFields:!0}).then((()=>(ye("success"),null==n||n.emit("validate",i.prop,!0,""),!0))).catch((e=>((e=>{var t,r;const{errors:a,fields:l}=e;ye("error"),L.value=a?null!=(r=null==(t=null==a?void 0:a[0])?void 0:t.message)?r:`${i.prop} is required`:"",null==n||n.emit("validate",i.prop,!1,L.value)})(e),Promise.reject(e))))},we=async(e,t)=>{if(ee||!i.prop)return!1;const r=B(t);if(!be.value)return null==t||t(!1),!1;const a=(e=>pe.value.filter((t=>!t.trigger||!e||(u(t.trigger)?t.trigger.includes(e):t.trigger===e))).map((({trigger:e,...t})=>t)))(e);return 0===a.length?(null==t||t(!0),!0):(ye("validating"),je(a).then((()=>(null==t||t(!0),!0))).catch((e=>{const{fields:a}=e;return null==t||t(!1,a),!r&&Promise.reject(a)})))},Ae=()=>{ye(""),L.value="",ee=!1},Se=async()=>{const e=null==n?void 0:n.model;if(!e||!i.prop)return;const t=R(e,i.prop);ee=!0,t.value=Ue(Y),await V(),Ae(),ee=!1};j((()=>i.error),(e=>{L.value=e||"",ye(e?"error":"")}),{immediate:!0}),j((()=>i.validateStatus),(e=>ye(e||"")));const Fe=A({...S(i),$el:X,size:f,validateState:P,labelId:h,inputIds:g,isGroup:de,hasLabel:ue,fieldValue:fe,addInputId:e=>{g.value.includes(e)||g.value.push(e)},removeInputId:e=>{g.value=g.value.filter((t=>t!==e))},resetField:Se,clearValidate:Ae,validate:we});return w(r,Fe),M((()=>{i.prop&&(null==n||n.addField(Fe),Y=Ue(fe.value))})),E((()=>{null==n||n.removeField(Fe)})),o({size:f,validateMessage:L,validateState:P,validate:we,clearValidate:Ae,resetField:Se}),(e,t)=>{var r;return I(),F("div",{ref_key:"formItemRef",ref:X,class:O(W(oe)),role:W(de)?"group":void 0,"aria-labelledby":W(de)?W(h):void 0},[q(W(He),{"is-auto-width":"auto"===W(ae).width,"update-all":"auto"===(null==(r=W(n))?void 0:r.labelWidth)},{default:D((()=>[W(ue)?(I(),N(T(W(ce)?"label":"div"),{key:0,id:W(h),for:W(ce),class:O(W(p).e("label")),style:J(W(ae))},{default:D((()=>[x(e.$slots,"label",{label:W(ge)},(()=>[H(K(W(ge)),1)]))])),_:3},8,["id","for","class","style"])):G("v-if",!0)])),_:3},8,["is-auto-width","update-all"]),z("div",{class:O(W(p).e("content")),style:J(W(le))},[x(e.$slots,"default"),q(Q,{name:`${W(p).namespace.value}-zoom-in-top`},{default:D((()=>[W(he)?x(e.$slots,"error",{key:0,error:L.value},(()=>[z("div",{class:O(W(se))},K(L.value),3)])):G("v-if",!0)])),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}}),[["__file","form-item.vue"]]);const Xe=X(Ge,{FormItem:Qe}),Ye=Y(Qe);export{Ye as E,Xe as a,Ve as b};
