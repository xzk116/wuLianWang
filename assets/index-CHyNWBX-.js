import{b4 as e,d as t,r as a,S as o,o as r,g as i,f as s,C as p,m as l,w as m,$ as n,i as d,a0 as u,W as c,e as j,h as g,ap as f}from"./index-D7ip52rg.js";import{v as h}from"./loading-DxPw_3Oa.js";import{E as b}from"./card-Bb1B2b71.js";import{_ as v}from"./index-CnOE4X2S.js";import{a as w,E as x}from"./table-column-CvTr7kWI.js";import"./checkbox-CjWUz1I7.js";/* empty css                */import"./popper-BESiP4FJ.js";import"./scrollbar-BkAw2MiZ.js";/* empty css            */import{E as y,a as _}from"./form-item-BlA0YleD.js";import{E as k}from"./button-B7Cpnz14.js";import{E as T}from"./date-picker-DY6DS7lR.js";import{E as V}from"./input-DKRZ9Ufq.js";import"./pagination-R5u_kM9p.js";import"./select-DsXUxeIp.js";import"./index-D_wDnIQN.js";import"./use-form-common-props-DwxMrRCA.js";import"./token-DWNpOE8r.js";import"./strings-DayrX4yN.js";import"./error-D_Dr4eZ1.js";import"./castArray-CEfX6IyU.js";import"./isEqual-R-_2t1hV.js";import"./Uint8Array-DqRcKjos.js";import"./arrayPush-BjozOkDH.js";import"./index-0-wkw8e5.js";import"./event-BwRzfsZt.js";import"./scroll-BAD_dPbv.js";import"./debounce-mjMVbbDV.js";import"./baseIteratee-DqyYX5Kq.js";import"./index-CDP4S9XB.js";import"./index-7fzrV7VL.js";import"./index-BxxfRVFK.js";import"./plugin-vueexport-helper-BCo6x5W8.js";import"./initCloneObject-C46LucBl.js";import"./index-DTFD3zWA.js";import"./isUndefined-DgmxjSXK.js";import"./index-BTKOuuO-.js";import"./dayjs.min-B355WD75.js";import"./index-Cfrhvgf0.js";import"./index-BJT6BNQs.js";const E="/api/v1/logs",U={getPage:t=>e({url:`${E}/page`,method:"get",params:t}),getVisitTrend:t=>e({url:`${E}/visit-trend`,method:"get",params:t}),getVisitStats:()=>e({url:`${E}/visit-stats`,method:"get"})},N={class:"app-container"},S={class:"search-container"},P=t({name:"Log",inheritAttrs:!1,__name:"index",setup(e){const t=a(),E=a(!1),P=a(0),$=o({pageNum:1,pageSize:10,keywords:"",createTime:["",""]}),C=a();function Y(){E.value=!0,U.getPage($).then((e=>{C.value=e.list,P.value=e.total})).finally((()=>{E.value=!1}))}function q(){$.pageNum=1,Y()}function z(){t.value.resetFields(),$.pageNum=1,$.createTime=void 0,Y()}return r((()=>{q()})),(e,a)=>{const o=V,r=y,U=T,A=k,M=_,D=x,F=w,I=v,K=b,L=h;return s(),i("div",N,[p("div",S,[l(M,{ref_key:"queryFormRef",ref:t,model:d($),inline:!0},{default:m((()=>[l(r,{prop:"keywords",label:"关键字"},{default:m((()=>[l(o,{modelValue:d($).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>d($).keywords=e),placeholder:"日志内容",clearable:"",onKeyup:n(q,["enter"])},null,8,["modelValue"])])),_:1}),l(r,{prop:"createTime",label:"操作时间"},{default:m((()=>[l(U,{modelValue:d($).createTime,"onUpdate:modelValue":a[1]||(a[1]=e=>d($).createTime=e),editable:!1,type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}},null,8,["modelValue"])])),_:1}),l(r,{class:"search-buttons"},{default:m((()=>[l(A,{type:"primary",icon:"search",onClick:q},{default:m((()=>a[5]||(a[5]=[u("搜索")]))),_:1}),l(A,{icon:"refresh",onClick:z},{default:m((()=>a[6]||(a[6]=[u("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),l(K,{shadow:"hover",class:"data-table"},{default:m((()=>[c((s(),j(F,{data:d(C),"highlight-current-row":"",border:"",class:"data-table__content"},{default:m((()=>[l(D,{label:"操作时间",prop:"createTime",width:"180"}),l(D,{label:"操作人",prop:"operator",width:"120"}),l(D,{label:"日志模块",prop:"module",width:"100"}),l(D,{label:"日志内容",prop:"content","min-width":"200"}),l(D,{label:"IP 地址",prop:"ip",width:"150"}),l(D,{label:"地区",prop:"region",width:"150"}),l(D,{label:"浏览器",prop:"browser",width:"150"}),l(D,{label:"终端系统",prop:"os",width:"200","show-overflow-tooltip":""}),l(D,{label:"执行时间(ms)",prop:"executionTime",width:"150"})])),_:1},8,["data"])),[[L,d(E)]]),d(P)>0?(s(),j(I,{key:0,total:d(P),"onUpdate:total":a[2]||(a[2]=e=>f(P)?P.value=e:null),page:d($).pageNum,"onUpdate:page":a[3]||(a[3]=e=>d($).pageNum=e),limit:d($).pageSize,"onUpdate:limit":a[4]||(a[4]=e=>d($).pageSize=e),onPagination:Y},null,8,["total","page","limit"])):g("",!0)])),_:1})])}}});export{P as default};
