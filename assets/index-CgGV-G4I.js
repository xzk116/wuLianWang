import{B as e,s as o,r as t,I as a,u,b9 as n,U as l}from"./index-C_pscggx.js";import{g as s}from"./use-form-common-props-k9Y9pot7.js";function i(l,{beforeFocus:i,afterFocus:r,beforeBlur:c,afterBlur:d}={}){const m=e(),{emit:v}=m,p=o(),f=s("disabled"),b=t(!1),g=e=>{!!n(i)&&i(e)||b.value||(b.value=!0,v("focus",e),null==r||r())},h=e=>{var o;!!n(c)&&c(e)||e.relatedTarget&&(null==(o=p.value)?void 0:o.contains(e.relatedTarget))||(b.value=!1,v("blur",e),null==d||d())};return a([p,f],(([e,o])=>{e&&(o?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))})),u(p,"focus",g,!0),u(p,"blur",h,!0),u(p,"click",(()=>{var e,o;(null==(e=p.value)?void 0:e.contains(document.activeElement))&&p.value!==document.activeElement||f.value||null==(o=l.value)||o.focus()}),!0),{isFocused:b,wrapperRef:p,handleFocus:g,handleBlur:h}}function r({afterComposition:e,emit:o}){const a=t(!1),u=e=>{var t;null==o||o("compositionupdate",e);const u=null==(t=e.target)?void 0:t.value,n=u[u.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(n)},n=t=>{null==o||o("compositionend",t),a.value&&(a.value=!1,l((()=>e(t))))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?n(e):u(e)},handleCompositionStart:e=>{null==o||o("compositionstart",e),a.value=!0},handleCompositionUpdate:u,handleCompositionEnd:n}}export{r as a,i as u};
