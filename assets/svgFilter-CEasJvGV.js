import{d as e,r as l,e as a,f as n,w as t,C as u,g as o,i,W as s,bi as r,m as p,a0 as d,U as m,aD as v}from"./index-DaChFCA5.js";import{E as c}from"./dialog-CRCcejWd.js";import"./overlay-D2d45-S1.js";import{E as f}from"./button-DPN4hvTk.js";import{_ as g}from"./plugin-vueexport-helper-BCo6x5W8.js";import"./index-Dae6c3qn.js";import"./use-dialog-D06B9QYP.js";import"./event-BwRzfsZt.js";import"./use-form-common-props-CIFnak-f.js";import"./isUndefined-DgmxjSXK.js";import"./refs-YhHUIUHt.js";import"./index-Bjpg6xJg.js";import"./vnode-vDTGVjad.js";import"./error-D_Dr4eZ1.js";import"./scroll-CpVn_leR.js";const b=""+new URL("咚咚咚-nx39-Y-b.png",import.meta.url).href,V={class:"con"},y={id:"container"},h={class:"image"},j=["src"],x={id:"controls"},I={class:"channel"},U={class:"channel"},C={class:"channel"},w={id:"filterOutput"},_={width:"0",height:"0"},F={id:"colorize"},G=["tableValues"],B=["tableValues"],R=["tableValues"],k={class:"dialog-footer"},D=g(e({__name:"svgFilter",setup(e,{expose:g}){const D=l(!1),z=l(null),O=l([.17,.61,.1]),S=l([.06,.38,.89]),T=l([.1,.3,.8]),$=l(""),E=b,W=()=>{z.value&&($.value=`\n    <filter id="colorize">\n      <feComponentTransfer>\n        <feFuncR type="table" tableValues="${O.value.join(" ")}"/>\n        <feFuncG type="table" tableValues="${S.value.join(" ")}"/>\n        <feFuncB type="table" tableValues="${T.value.join(" ")}"/>\n      </feComponentTransfer>\n    </filter>`.trim(),z.value.style.filter="url(#colorize)")},A=e=>{D.value=!1};return g({init:()=>{D.value=!0,m((()=>{var e;const l=null==(e=z.value)?void 0:e.getContext("2d");if(!l||!z.value)return;let a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{if(!z.value)return v.error("图片加载失败");z.value.width=a.width,z.value.height=a.height,l.drawImage(a,0,0);const e=l.getImageData(0,0,z.value.width,z.value.height),n=e.data;for(let l=0;l<n.length;l+=4){const e=.2989*n[l]+.587*n[l+1]+.114*n[l+2];n[l]=e,n[l+1]=e,n[l+2]=e}l.putImageData(e,0,0),W()},a.src=E}))}}),(e,l)=>{const m=f,v=c;return n(),a(v,{modelValue:D.value,"onUpdate:modelValue":l[12]||(l[12]=e=>D.value=e),title:"SVG滤波器",width:"1200","before-close":A,"align-center":""},{footer:t((()=>[u("div",k,[p(m,{onClick:l[10]||(l[10]=e=>D.value=!1)},{default:t((()=>l[24]||(l[24]=[d("取消")]))),_:1}),p(m,{type:"primary",onClick:l[11]||(l[11]=e=>D.value=!1)},{default:t((()=>l[25]||(l[25]=[d(" 确定 ")]))),_:1})])])),default:t((()=>[u("div",V,[u("div",y,[l[23]||(l[23]=u("h1",null,"灰度到彩色SVG滤镜",-1)),u("div",h,[u("img",{src:i(b),alt:"原图",class:"img"},null,8,j),u("canvas",{id:"imageCanvas",ref_key:"imageCanvas",ref:z},null,512)]),u("div",x,[u("div",I,[l[13]||(l[13]=u("label",null,"Red (暗)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[0]||(l[0]=e=>O.value[0]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,O.value[0]]]),l[14]||(l[14]=u("label",null,"Red (中和)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[1]||(l[1]=e=>O.value[1]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,O.value[1]]]),l[15]||(l[15]=u("label",null,"Red (亮)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[2]||(l[2]=e=>O.value[2]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,O.value[2]]])]),u("div",U,[l[16]||(l[16]=u("label",null,"Green (暗)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[3]||(l[3]=e=>S.value[0]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,S.value[0]]]),l[17]||(l[17]=u("label",null,"Green (中和)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[4]||(l[4]=e=>S.value[1]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,S.value[1]]]),l[18]||(l[18]=u("label",null,"Green (亮)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[5]||(l[5]=e=>S.value[2]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,S.value[2]]])]),u("div",C,[l[19]||(l[19]=u("label",null,"Blue (暗)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[6]||(l[6]=e=>T.value[0]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,T.value[0]]]),l[20]||(l[20]=u("label",null,"Blue (中和)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[7]||(l[7]=e=>T.value[1]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,T.value[1]]]),l[21]||(l[21]=u("label",null,"Blue (亮)",-1)),s(u("input",{type:"range","onUpdate:modelValue":l[8]||(l[8]=e=>T.value[2]=e),min:"0",max:"1",step:"0.01",onInput:W},null,544),[[r,T.value[2]]])])]),u("div",w,[l[22]||(l[22]=u("label",null,"SVG过滤器代码:",-1)),s(u("textarea",{id:"filterCode","onUpdate:modelValue":l[9]||(l[9]=e=>$.value=e),readonly:""},null,512),[[r,$.value]])]),(n(),o("svg",_,[u("defs",null,[u("filter",F,[u("feComponentTransfer",null,[u("feFuncR",{type:"table",tableValues:O.value.join(" ")},null,8,G),u("feFuncG",{type:"table",tableValues:S.value.join(" ")},null,8,B),u("feFuncB",{type:"table",tableValues:T.value.join(" ")},null,8,R)])])])]))])])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-a66aa582"]]);export{D as default};
