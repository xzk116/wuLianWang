import{t as e,v as o,bc as l,z as a,B as n,bS as t,r as s,c2 as r,c as u,J as c,I as d,o as i,ce as p,a8 as f,H as y,U as v}from"./index-DaChFCA5.js";import{b as m}from"./index-Dae6c3qn.js";import{U as C}from"./event-BwRzfsZt.js";import{u as g}from"./overlay-D2d45-S1.js";import{d as b}from"./use-form-common-props-CIFnak-f.js";import{i as B}from"./isUndefined-DgmxjSXK.js";const S=e({center:Boolean,alignCenter:Boolean,closeIcon:{type:o},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),h={close:()=>!0},x=e({...S,appendToBody:Boolean,appendTo:{type:m.to.type,default:"body"},beforeClose:{type:a(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),D={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[C]:e=>l(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},F=(e,o)=>{var l;const a=n().emit,{nextZIndex:m}=t();let S="";const h=b(),x=b(),D=s(!1),F=s(!1),I=s(!1),O=s(null!=(l=e.zIndex)?l:m());let A,j;const w=r("namespace",p),k=u((()=>{const o={},l=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(o[`${l}-margin-top`]=e.top),e.width&&(o[`${l}-width`]=c(e.width))),o})),z=u((()=>e.alignCenter?{display:"flex"}:{}));function E(){null==j||j(),null==A||A(),e.openDelay&&e.openDelay>0?({stop:A}=f((()=>T()),e.openDelay)):T()}function L(){null==A||A(),null==j||j(),e.closeDelay&&e.closeDelay>0?({stop:j}=f((()=>M()),e.closeDelay)):M()}function N(){e.beforeClose?e.beforeClose((function(e){e||(F.value=!0,D.value=!1)})):L()}function T(){y&&(D.value=!0)}function M(){D.value=!1}return e.lockScroll&&g(D),d((()=>e.modelValue),(l=>{l?(F.value=!1,E(),I.value=!0,O.value=B(e.zIndex)?m():O.value++,v((()=>{a("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)}))):D.value&&L()})),d((()=>e.fullscreen),(e=>{o.value&&(e?(S=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=S)})),i((()=>{e.modelValue&&(D.value=!0,I.value=!0,E())})),{afterEnter:function(){a("opened")},afterLeave:function(){a("closed"),a(C,!1),e.destroyOnClose&&(I.value=!1)},beforeLeave:function(){a("close")},handleClose:N,onModalClick:function(){e.closeOnClickModal&&N()},close:L,doClose:M,onOpenAutoFocus:function(){a("openAutoFocus")},onCloseAutoFocus:function(){a("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&N()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:h,bodyId:x,closed:F,style:k,overlayDialogStyle:z,rendered:I,visible:D,zIndex:O}};export{x as a,h as b,S as c,D as d,F as u};
