import{t as e,aU as a,bm as t,r as l,c as n,i as o,L as i,I as r,s,o as u,ab as c,a6 as v,y as d,c3 as p,B as h,_ as m,d as f,b as g,x as y,g as w,f as b,e as C,h as k,C as x,w as I,W as _,j as S,n as j,m as M,E,ct as T,Y as B,T as A,a4 as L,l as D,k as H,P as N,Q as V,F as P,A as $,S as O,aW as z,a5 as G,q as U,G as W,aD as R,a0 as F,ap as q}from"./index-zthBmEkK.js";import{E as Q,a as X}from"./tab-pane-DlPk8oP7.js";import{t as Y,E as K}from"./image-viewer-CCaNDxin.js";import{E as J}from"./button-BLdkehaO.js";import{_ as Z}from"./plugin-vueexport-helper-BCo6x5W8.js";import{u as ee}from"./index-D0kyZc3D.js";import{f as ae}from"./vnode-DpfUKNtI.js";import{C as te}from"./event-BwRzfsZt.js";import"./error-D_Dr4eZ1.js";import"./strings-Dn0paU8A.js";import"./index-CoC2P9bA.js";import"./debounce-DxlXJIjP.js";import"./position-DjffWLBe.js";import"./index-DJHOhiPI.js";import"./scroll-CUPJOhL3.js";import"./index-3UONHUgt.js";import"./use-form-common-props-BhFbBPIf.js";const le=e({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),ne={change:(e,t)=>[e,t].every(a)},oe=Symbol("carouselContextKey"),ie="ElCarouselItem",re=(e,a,m)=>{const{children:f,addChild:g,removeChild:y}=ee(h(),ie),w=t(),b=l(-1),C=l(null),k=l(!1),x=l(),I=l(0),_=l(!0),S=l(!0),j=l(!1),M=n((()=>"never"!==e.arrow&&!o(B))),E=n((()=>f.value.some((e=>e.props.label.toString().length>0)))),T=n((()=>"card"===e.type)),B=n((()=>"vertical"===e.direction)),A=n((()=>"auto"!==e.height?{height:e.height}:{height:`${I.value}px`,overflow:"hidden"})),L=Y((e=>{P(e)}),300,{trailing:!0}),D=Y((a=>{!function(a){"hover"===e.trigger&&a!==b.value&&(b.value=a,S.value||(j.value=!0))}(a)}),300);function H(){C.value&&(clearInterval(C.value),C.value=null)}function N(){e.interval<=0||!e.autoplay||C.value||(C.value=setInterval((()=>V()),e.interval))}const V=()=>{S.value||(j.value=!0),S.value=!1,b.value<f.value.length-1?b.value=b.value+1:e.loop?b.value=0:j.value=!1};function P(a){if(S.value||(j.value=!0),S.value=!1,i(a)){const e=f.value.filter((e=>e.props.name===a));e.length>0&&(a=f.value.indexOf(e[0]))}if(a=Number(a),Number.isNaN(a)||a!==Math.floor(a))return;const t=f.value.length,l=b.value;b.value=a<0?e.loop?t-1:0:a>=t?e.loop?0:t-1:a,l===b.value&&$(l),O()}function $(e){f.value.forEach(((a,t)=>{a.translateItem(t,b.value,e)}))}function O(){H(),e.pauseOnHover||N()}r((()=>b.value),((e,t)=>{$(t),_.value&&(e%=2,t%=2),t>-1&&a(te,e,t)})),r((()=>e.autoplay),(e=>{e?N():H()})),r((()=>e.loop),(()=>{P(b.value)})),r((()=>e.interval),(()=>{O()}));const z=s();return u((()=>{r((()=>f.value),(()=>{f.value.length>0&&P(e.initialIndex)}),{immediate:!0}),z.value=c(x.value,(()=>{$()})),N()})),v((()=>{H(),x.value&&z.value&&z.value.stop()})),d(oe,{root:x,isCardType:T,isVertical:B,items:f,loop:e.loop,cardScale:e.cardScale,addItem:g,removeItem:y,setActiveItem:P,setContainerHeight:function(a){"auto"===e.height&&(I.value=a)}}),{root:x,activeIndex:b,arrowDisplay:M,hasLabel:E,hover:k,isCardType:T,isTransitioning:j,items:f,isVertical:B,containerStyle:A,isItemsTwoLength:_,handleButtonEnter:function(e){o(B)||f.value.forEach(((a,t)=>{e===function(e,a){var t,l,n,i;const r=o(f),s=r.length;if(0===s||!e.states.inStage)return!1;const u=a+1,c=a-1,v=s-1,d=r[v].states.active,p=r[0].states.active,h=null==(l=null==(t=r[u])?void 0:t.states)?void 0:l.active,m=null==(i=null==(n=r[c])?void 0:n.states)?void 0:i.active;return a===v&&p||h?"left":!!(0===a&&d||m)&&"right"}(a,t)&&(a.states.hover=!0)}))},handleTransitionEnd:function(){j.value=!1},handleButtonLeave:function(){o(B)||f.value.forEach((e=>{e.states.hover=!1}))},handleIndicatorClick:function(e){e!==b.value&&(S.value||(j.value=!0)),b.value=e},handleMouseEnter:function(){k.value=!0,e.pauseOnHover&&H()},handleMouseLeave:function(){k.value=!1,N()},setActiveItem:P,prev:function(){P(b.value-1)},next:function(){P(b.value+1)},PlaceholderItem:function(){var a;const t=null==(a=w.default)?void 0:a.call(w);if(!t)return null;const l=ae(t).filter((e=>p(e)&&e.type.name===ie));return 2===(null==l?void 0:l.length)&&e.loop&&!T.value?(_.value=!0,l):(_.value=!1,null)},isTwoLengthShow:e=>!_.value||(b.value<=1?e<=1:e>1),throttledArrowClick:L,throttledIndicatorHover:D}},se=f({name:"ElCarousel"});var ue=m(f({...se,props:le,emits:ne,setup(e,{expose:a,emit:t}){const l=e,{root:i,activeIndex:r,arrowDisplay:s,hasLabel:u,hover:c,isCardType:v,items:d,isVertical:p,containerStyle:h,handleButtonEnter:m,handleButtonLeave:f,isTransitioning:$,handleIndicatorClick:O,handleMouseEnter:z,handleMouseLeave:G,handleTransitionEnd:U,setActiveItem:W,prev:R,next:F,PlaceholderItem:q,isTwoLengthShow:Q,throttledArrowClick:X,throttledIndicatorHover:Y}=re(l,t),K=g("carousel"),{t:J}=y(),Z=n((()=>{const e=[K.b(),K.m(l.direction)];return o(v)&&e.push(K.m("card")),e})),ee=n((()=>{const e=[K.e("container")];return l.motionBlur&&o($)&&d.value.length>1&&e.push(o(p)?`${K.namespace.value}-transitioning-vertical`:`${K.namespace.value}-transitioning`),e})),ae=n((()=>{const e=[K.e("indicators"),K.em("indicators",l.direction)];return o(u)&&e.push(K.em("indicators","labels")),"outside"===l.indicatorPosition&&e.push(K.em("indicators","outside")),o(p)&&e.push(K.em("indicators","right")),e}));return a({activeIndex:r,setActiveItem:W,prev:R,next:F}),(e,a)=>(b(),w("div",{ref_key:"root",ref:i,class:j(o(Z)),onMouseenter:S(o(z),["stop"]),onMouseleave:S(o(G),["stop"])},[o(s)?(b(),C(A,{key:0,name:"carousel-arrow-left",persisted:""},{default:I((()=>[_(x("button",{type:"button",class:j([o(K).e("arrow"),o(K).em("arrow","left")]),"aria-label":o(J)("el.carousel.leftArrow"),onMouseenter:e=>o(m)("left"),onMouseleave:o(f),onClick:S((e=>o(X)(o(r)-1)),["stop"])},[M(o(E),null,{default:I((()=>[M(o(T))])),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[B,("always"===e.arrow||o(c))&&(l.loop||o(r)>0)]])])),_:1})):k("v-if",!0),o(s)?(b(),C(A,{key:1,name:"carousel-arrow-right",persisted:""},{default:I((()=>[_(x("button",{type:"button",class:j([o(K).e("arrow"),o(K).em("arrow","right")]),"aria-label":o(J)("el.carousel.rightArrow"),onMouseenter:e=>o(m)("right"),onMouseleave:o(f),onClick:S((e=>o(X)(o(r)+1)),["stop"])},[M(o(E),null,{default:I((()=>[M(o(L))])),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[B,("always"===e.arrow||o(c))&&(l.loop||o(r)<o(d).length-1)]])])),_:1})):k("v-if",!0),x("div",{class:j(o(ee)),style:H(o(h)),onTransitionend:o(U)},[M(o(q)),D(e.$slots,"default")],46,["onTransitionend"]),"none"!==e.indicatorPosition?(b(),w("ul",{key:2,class:j(o(ae))},[(b(!0),w(N,null,V(o(d),((a,t)=>_((b(),w("li",{key:t,class:j([o(K).e("indicator"),o(K).em("indicator",e.direction),o(K).is("active",t===o(r))]),onMouseenter:e=>o(Y)(t),onClick:S((e=>o(O)(t)),["stop"])},[x("button",{class:j(o(K).e("button")),"aria-label":o(J)("el.carousel.indicator",{index:t+1})},[o(u)?(b(),w("span",{key:0},P(a.props.label),1)):k("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[B,o(Q)(t)]]))),128))],2)):k("v-if",!0),l.motionBlur?(b(),w("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[x("defs",null,[x("filter",{id:"elCarouselHorizontal"},[x("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),x("filter",{id:"elCarouselVertical"},[x("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):k("v-if",!0)],42,["onMouseenter","onMouseleave"]))}}),[["__file","carousel.vue"]]);const ce=e({name:{type:String,default:""},label:{type:[String,Number],default:""}}),ve=e=>{const a=$(oe),t=h(),n=l(),i=l(!1),r=l(0),s=l(1),c=l(!1),v=l(!1),d=l(!1),p=l(!1),{isCardType:m,isVertical:f,cardScale:g}=a;const y=(e,t,l)=>{var i;const u=o(m),h=null!=(i=a.items.value.length)?i:Number.NaN,y=e===t;u||G(l)||(p.value=y||e===l),!y&&h>2&&a.loop&&(e=function(e,a,t){const l=t-1,n=t/2;return 0===a&&e===l?-1:a===l&&0===e?t:e<a-1&&a-e>=n?t+1:e>a+1&&e-a>=n?-2:e}(e,t,h));const w=o(f);c.value=y,u?(d.value=Math.round(Math.abs(e-t))<=1,r.value=function(e,t){var l,n;const i=o(f)?(null==(l=a.root.value)?void 0:l.offsetHeight)||0:(null==(n=a.root.value)?void 0:n.offsetWidth)||0;return d.value?i*((2-g)*(e-t)+1)/4:e<t?-(1+g)*i/4:(3+g)*i/4}(e,t),s.value=o(c)?1:g):r.value=function(e,t,l){const n=a.root.value;return n?((l?n.offsetHeight:n.offsetWidth)||0)*(e-t):0}(e,t,w),v.value=!0,y&&n.value&&a.setContainerHeight(n.value.offsetHeight)};return u((()=>{a.addItem({props:e,states:O({hover:i,translate:r,scale:s,active:c,ready:v,inStage:d,animating:p}),uid:t.uid,translateItem:y})})),z((()=>{a.removeItem(t.uid)})),{carouselItemRef:n,active:c,animating:p,hover:i,inStage:d,isVertical:f,translate:r,isCardType:m,scale:s,ready:v,handleItemClick:function(){if(a&&o(m)){const e=a.items.value.findIndex((({uid:e})=>e===t.uid));a.setActiveItem(e)}}}},de=f({name:ie});var pe=m(f({...de,props:ce,setup(e){const a=e,t=g("carousel"),{carouselItemRef:l,active:i,animating:r,hover:s,inStage:u,isVertical:c,translate:v,isCardType:d,scale:p,ready:h,handleItemClick:m}=ve(a),f=n((()=>[t.e("item"),t.is("active",i.value),t.is("in-stage",u.value),t.is("hover",s.value),t.is("animating",r.value),{[t.em("item","card")]:d.value,[t.em("item","card-vertical")]:d.value&&c.value}])),y=n((()=>({transform:[`${"translate"+(o(c)?"Y":"X")}(${o(v)}px)`,`scale(${o(p)})`].join(" ")})));return(e,a)=>_((b(),w("div",{ref_key:"carouselItemRef",ref:l,class:j(o(f)),style:H(o(y)),onClick:o(m)},[o(d)?_((b(),w("div",{key:0,class:j(o(t).e("mask"))},null,2)),[[B,!o(i)]]):k("v-if",!0),D(e.$slots,"default")],14,["onClick"])),[[B,o(h)]])}}),[["__file","carousel-item.vue"]]);const he=U(ue,{CarouselItem:pe}),me=W(pe),fe={class:"right_con"},ge={class:"now_con"},ye={class:"now_txt"},we={class:"now_top"},be={class:"now_top"},Ce=["src"],ke={class:"now_btn"},xe={key:1,style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center"}},Ie={class:"phone_con"},_e={class:"con_img"},Se={style:{width:"200px"}},je=Z({__name:"index",setup(e){l("");let a=l({}),t=l("one"),n=l([]),i=l([]),r=l(""),s=l(null),c=l(!0),d=l(""),p=l(null);u((()=>{g()})),v((()=>{s.value&&(s.value.getTracks().forEach((e=>e.stop())),s.value=null)}));let h=e=>{r.value=e},m=e=>{const t=new FormData;if(t.append("zjh",a.value.zjh),2==e){t.append("iftgflag","0");const e="application/x-zip-compressed",a=Date.now();let l=i.value.map(((t,l)=>((e,a,t,l)=>{const n=e.split(","),o=n[0].match(/:(.*?);/)[1],i=atob(n[1]),r=i.length,s=new Uint8Array(r);for(let c=0;c<r;c++)s[c]=i.charCodeAt(c);const u=new Blob([s],{type:o});return new File([u],a,{type:t,lastModified:l})})(t.image,l+"图片",e,a)));l.forEach(((e,a)=>{t.append("files",e,e.name)}))}else t.append("iftgflag","1")},f=(e,a)=>{},g=async()=>{try{y()}catch(e){}},y=async()=>{const e={video:{width:1280,height:960}};try{s.value=await navigator.mediaDevices.getUserMedia(e),p.value&&(p.value.srcObject=s.value)}catch(a){"PermissionDeniedError"===a.name?R.error("浏览器调用摄像头失败，浏览器没有调用摄像头的权限，建议使用google浏览器访问"):R.error("获取摄像头失败："+a.message)}},k=e=>{if(1==e)c.value=!0,n.value.splice(r.value,1);else if(2==e){if(n.value.length>=5)return R.warning("最多上传5张照片");c.value=!0}},S=()=>{if(n.value.length>=5)return R.warning("最多上传5张照片");let e=p.value;e.setAttribute("crossOrigin","anonymous");let a=document.createElement("canvas");a.width=e.videoWidth*(598/1280),a.height=e.videoHeight*(440/960),a.getContext("2d").drawImage(e,0,0,a.width,a.height);let t=a.toDataURL("image/png"),l=[];l.push({time:(new Date).toLocaleString(),image:t.split(",")[1]}),i.value.push({time:(new Date).toLocaleString(),image:t}),l.forEach((e=>{n.value.push(e.image)})),c.value=!1};return(e,a)=>{const l=me,i=he,r=J,s=Q,u=K,v=X;return b(),w("div",fe,[M(v,{modelValue:o(t),"onUpdate:modelValue":a[3]||(a[3]=e=>q(t)?t.value=e:t=e),onTabClick:o(f)},{default:I((()=>[M(s,{label:"实时拍照",name:"one"},{default:I((()=>[x("div",ge,[x("div",ye,P(o(n).length)+"/5",1),_(x("div",we,[x("video",{id:"v",autoplay:"true",ref_key:"video",ref:p,width:"598px",height:"440px"},null,512)],512),[[B,o(c)]]),_(x("div",be,[M(i,{interval:5e3,arrow:"always",trigger:"click",onChange:o(h),style:{width:"598px",height:"440px"}},{default:I((()=>[(b(!0),w(N,null,V(o(n),(e=>(b(),C(l,{key:e,style:{height:"440px"}},{default:I((()=>[x("img",{src:"data:image/png;base64,"+e,alt:"",style:{width:"100%",height:"440px"}},null,8,Ce)])),_:2},1024)))),128))])),_:1},8,["onChange"])],512),[[B,!o(c)]]),x("div",ke,[o(c)?(b(),C(r,{key:0,type:"primary",onClick:o(S),style:{width:"100%"}},{default:I((()=>a[4]||(a[4]=[F(" 拍照 ")]))),_:1},8,["onClick"])):(b(),w("div",xe,[M(r,{type:"primary",onClick:a[0]||(a[0]=e=>o(k)(1))},{default:I((()=>a[5]||(a[5]=[F("重拍")]))),_:1}),M(r,{type:"primary",onClick:a[1]||(a[1]=e=>o(k)(2))},{default:I((()=>a[6]||(a[6]=[F("继续拍照")]))),_:1})]))])])])),_:1}),M(s,{label:"手机扫码",name:"two"},{default:I((()=>[x("div",Ie,[x("div",_e,[M(u,{src:"data:image/png;base64,"+o(d)},null,8,["src"])]),x("div",Se,[M(r,{type:"primary",onClick:a[2]||(a[2]=e=>o(m)(1)),style:{width:"100%"}},{default:I((()=>a[7]||(a[7]=[F("跳过")]))),_:1})])])])),_:1})])),_:1},8,["modelValue","onTabClick"])])}}},[["__scopeId","data-v-2d8fc9ce"]]);export{je as default};
