import{d as e,bD as a,r as s,I as t,o as l,a6 as n,g as o,f as r,m as u,w as d,a0 as i,ap as p,i as m,e as c,C as f,P as v,Q as _,n as y,F as b}from"./index-D7ip52rg.js";import{a as j,E as h}from"./form-item-BlA0YleD.js";import{E as g}from"./card-Bb1B2b71.js";import{E as x}from"./row-DuytwHId.js";/* empty css            */import{E as k}from"./col-DZbnyk1-.js";import{E as V}from"./button-B7Cpnz14.js";import{E as w}from"./input-DKRZ9Ufq.js";import{E as I}from"./link-CAsUMmxH.js";import{u as E}from"./useStomp-BU5-5-vP.js";import{E as C}from"./index-D_wDnIQN.js";import{_ as S}from"./plugin-vueexport-helper-BCo6x5W8.js";import"./use-form-common-props-DwxMrRCA.js";import"./castArray-CEfX6IyU.js";import"./error-D_Dr4eZ1.js";import"./index-BTKOuuO-.js";import"./Uint8Array-DqRcKjos.js";import"./arrayPush-BjozOkDH.js";import"./initCloneObject-C46LucBl.js";import"./index-BxxfRVFK.js";import"./index-CDP4S9XB.js";import"./event-BwRzfsZt.js";import"./index-BJT6BNQs.js";import"./index-0-wkw8e5.js";const U={class:"app-container"},O={class:"chat-messages-wrapper"},A={key:0,class:"chat-message__content"},D={class:"text-gray-600"},H={key:1},N=S(e({__name:"websocket",setup(e){const S=a(),N=s(""),P=s([]),Q=s("亲爱的朋友们，系统已恢复最新状态。"),T=s("Hi, "+S.userInfo.username+" 这里是点对点消息示例！"),W=s("root"),{isConnected:q,connect:F,subscribe:J,disconnect:L,client:X}=E({debug:!0});function Y(){F()}function Z(){L()}function $(){X.value&&X.value.connected&&(X.value.publish({destination:"/topic/notice",body:Q.value}),P.value.push({sender:S.userInfo.username,content:Q.value}))}function z(){X.value&&X.value.connected&&(X.value.publish({destination:"/app/sendToUser/"+W.value,body:T.value}),P.value.push({sender:S.userInfo.username,content:T.value}))}return t((()=>q.value),(e=>{e?(J("/topic/notice",(e=>{P.value.push({sender:"Server",content:e.body})})),J("/user/queue/greeting",(e=>{const a=JSON.parse(e.body);P.value.push({sender:a.sender,content:a.content})})),P.value.push({sender:"Server",content:"Websocket 已连接",type:"tip"})):P.value.push({sender:"Server",content:"Websocket 已断开",type:"tip"})})),l((()=>{Y()})),n((()=>{Z()})),(e,a)=>{const s=I,t=w,l=V,n=k,E=C,F=x,J=g,L=h,X=j;return r(),o("div",U,[u(s,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/websocket.vue",type:"primary",target:"_blank",class:"mb-[20px]"},{default:d((()=>a[4]||(a[4]=[i(" 示例源码 请点击>>>> ")]))),_:1}),u(F,{gutter:10},{default:d((()=>[u(n,{span:12},{default:d((()=>[u(J,null,{default:d((()=>[u(F,null,{default:d((()=>[u(n,{span:18},{default:d((()=>[u(t,{modelValue:m(N),"onUpdate:modelValue":a[0]||(a[0]=e=>p(N)?N.value=e:null),style:{width:"200px"}},null,8,["modelValue"]),u(l,{type:"primary",class:"ml-5",disabled:m(q),onClick:Y},{default:d((()=>a[5]||(a[5]=[i(" 连接 ")]))),_:1},8,["disabled"]),u(l,{type:"danger",disabled:!m(q),onClick:Z},{default:d((()=>a[6]||(a[6]=[i(" 断开 ")]))),_:1},8,["disabled"])])),_:1}),u(n,{span:6,class:"text-right"},{default:d((()=>[a[9]||(a[9]=i(" 连接状态： ")),m(q)?(r(),c(E,{key:0,type:"success"},{default:d((()=>a[7]||(a[7]=[i("已连接")]))),_:1})):(r(),c(E,{key:1,type:"info"},{default:d((()=>a[8]||(a[8]=[i("已断开")]))),_:1}))])),_:1})])),_:1})])),_:1}),u(J,{class:"mt-5"},{default:d((()=>[u(X,{"label-width":"90px"},{default:d((()=>[u(L,{label:"消息内容"},{default:d((()=>[u(t,{modelValue:m(Q),"onUpdate:modelValue":a[1]||(a[1]=e=>p(Q)?Q.value=e:null),type:"textarea"},null,8,["modelValue"])])),_:1}),u(L,null,{default:d((()=>[u(l,{type:"primary",onClick:$},{default:d((()=>a[10]||(a[10]=[i("发送广播")]))),_:1})])),_:1})])),_:1})])),_:1}),u(J,{class:"mt-5"},{default:d((()=>[u(X,{"label-width":"90px"},{default:d((()=>[u(L,{label:"消息内容"},{default:d((()=>[u(t,{modelValue:m(T),"onUpdate:modelValue":a[2]||(a[2]=e=>p(T)?T.value=e:null),type:"textarea"},null,8,["modelValue"])])),_:1}),u(L,{label:"消息接收人"},{default:d((()=>[u(t,{modelValue:m(W),"onUpdate:modelValue":a[3]||(a[3]=e=>p(W)?W.value=e:null)},null,8,["modelValue"])])),_:1}),u(L,null,{default:d((()=>[u(l,{type:"primary",onClick:z},{default:d((()=>a[11]||(a[11]=[i("发送点对点消息")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(n,{span:12},{default:d((()=>[u(J,null,{default:d((()=>[f("div",O,[(r(!0),o(v,null,_(m(P),((e,a)=>(r(),o("div",{key:a,class:y(["tip"===e.type?"system-notice":"chat-message",{"chat-message--sent":e.sender===m(S).userInfo.username,"chat-message--received":e.sender!==m(S).userInfo.username}])},["tip"!=e.type?(r(),o("div",A,[f("div",{class:y({"chat-message__sender":e.sender===m(S).userInfo.username,"chat-message__receiver":e.sender!==m(S).userInfo.username})},b(e.sender),3),f("div",D,b(e.content),1)])):(r(),o("div",H,b(e.content),1))],2)))),128))])])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-a82f3a41"]]);export{N as default};
