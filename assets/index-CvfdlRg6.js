import{b4 as e,d as t,r as a,S as o,o as r,g as i,f as s,C as l,m as p,w as m,$ as n,i as d,a0 as u,W as c,e as j,h as g,ap as f}from"./index-B7mxfYN9.js";import{v as h}from"./loading-CPXANvRE.js";import{E as b}from"./card-CntRCixl.js";import{_ as w}from"./index-DuXRKiey.js";import{a as v,E as x}from"./table-column-BezrIuA-.js";import"./checkbox-BYbRYGqN.js";/* empty css                */import"./popper-uRd2LVQ5.js";import"./scrollbar-oG3NYRr_.js";/* empty css            */import{E as y,a as _}from"./form-item-CNbubMQV.js";import{E as k}from"./button-DlZsF7XI.js";import{E as V}from"./date-picker-qwOehEdU.js";import{E as T}from"./input-DruLAUq_.js";import"./pagination-yjeHLM1z.js";import"./select-DF8HK0bk.js";import"./index-DNVcuPom.js";import"./use-form-common-props-BoXeBtCZ.js";import"./token-DWNpOE8r.js";import"./strings-DJfskLeH.js";import"./error-D_Dr4eZ1.js";import"./castArray-u2Y_HE7T.js";import"./isEqual-BVhK2o24.js";import"./Uint8Array-BRHI3opn.js";import"./arrayPush-wByseOHq.js";import"./index-Ao-6EOcV.js";import"./event-BwRzfsZt.js";import"./scroll-DXwU3rOm.js";import"./debounce-Bbuln1nW.js";import"./baseIteratee-Dz2QZz0g.js";import"./index-CprfLmJQ.js";import"./index-QxSF5DbM.js";import"./index-CooQn4Hz.js";import"./plugin-vueexport-helper-BCo6x5W8.js";import"./initCloneObject-DiQN_EQl.js";import"./index-DEbwSWSa.js";import"./isUndefined-DgmxjSXK.js";import"./index-BTKOuuO-.js";import"./dayjs.min-C82XILBc.js";import"./index-DKtSz3bI.js";import"./index-CeAg98z5.js";const U="/api/v1/logs",E={getPage:t=>e({url:`${U}/page`,method:"get",params:t}),getVisitTrend:t=>e({url:`${U}/visit-trend`,method:"get",params:t}),getVisitStats:()=>e({url:`${U}/visit-stats`,method:"get"})},P={class:"app-container"},C={class:"search-container"},N=t({name:"Log",inheritAttrs:!1,__name:"index",setup(e){const t=a(),U=a(!1),N=a(0),S=o({pageNum:1,pageSize:10,keywords:"",createTime:["",""]}),Y=a();function $(){U.value=!0,E.getPage(S).then((e=>{Y.value=e.list,N.value=e.total})).finally((()=>{U.value=!1}))}function z(){S.pageNum=1,$()}function A(){t.value.resetFields(),S.pageNum=1,S.createTime=void 0,$()}return r((()=>{z()})),(e,a)=>{const o=T,r=y,E=V,D=k,F=_,I=x,q=v,M=w,O=b,W=h;return s(),i("div",P,[l("div",C,[p(F,{ref_key:"queryFormRef",ref:t,model:d(S),inline:!0},{default:m((()=>[p(r,{prop:"keywords",label:"关键字"},{default:m((()=>[p(o,{modelValue:d(S).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>d(S).keywords=e),placeholder:"日志内容",clearable:"",onKeyup:n(z,["enter"])},null,8,["modelValue"])])),_:1}),p(r,{prop:"createTime",label:"操作时间"},{default:m((()=>[p(E,{modelValue:d(S).createTime,"onUpdate:modelValue":a[1]||(a[1]=e=>d(S).createTime=e),editable:!1,type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}},null,8,["modelValue"])])),_:1}),p(r,{class:"search-buttons"},{default:m((()=>[p(D,{type:"primary",icon:"search",onClick:z},{default:m((()=>a[5]||(a[5]=[u("搜索")]))),_:1}),p(D,{icon:"refresh",onClick:A},{default:m((()=>a[6]||(a[6]=[u("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),p(O,{shadow:"hover",class:"data-table"},{default:m((()=>[c((s(),j(q,{data:d(Y),"highlight-current-row":"",border:"",class:"data-table__content"},{default:m((()=>[p(I,{label:"操作时间",prop:"createTime",width:"180"}),p(I,{label:"操作人",prop:"operator",width:"120"}),p(I,{label:"日志模块",prop:"module",width:"100"}),p(I,{label:"日志内容",prop:"content","min-width":"200"}),p(I,{label:"IP 地址",prop:"ip",width:"150"}),p(I,{label:"地区",prop:"region",width:"150"}),p(I,{label:"浏览器",prop:"browser",width:"150"}),p(I,{label:"终端系统",prop:"os",width:"200","show-overflow-tooltip":""}),p(I,{label:"执行时间(ms)",prop:"executionTime",width:"150"})])),_:1},8,["data"])),[[W,d(U)]]),d(N)>0?(s(),j(M,{key:0,total:d(N),"onUpdate:total":a[2]||(a[2]=e=>f(N)?N.value=e:null),page:d(S).pageNum,"onUpdate:page":a[3]||(a[3]=e=>d(S).pageNum=e),limit:d(S).pageSize,"onUpdate:limit":a[4]||(a[4]=e=>d(S).pageSize=e),onPagination:$},null,8,["total","page","limit"])):g("",!0)])),_:1})])}}});export{N as default};
