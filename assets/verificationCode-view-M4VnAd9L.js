import{br as e,at as t,d as a,r,S as i,aD as l,aW as n,e as o,f as u,w as s,C as v,g as c,m as f,i as p,F as m,P as d,Q as y,$ as b,a0 as j,U as g}from"./index-DaChFCA5.js";import{E as h}from"./dialog-CRCcejWd.js";import"./overlay-D2d45-S1.js";import{E as x}from"./button-DPN4hvTk.js";import{E as k}from"./input-Cl85z27c.js";import{_ as T}from"./plugin-vueexport-helper-BCo6x5W8.js";import"./index-Dae6c3qn.js";import"./use-dialog-D06B9QYP.js";import"./event-BwRzfsZt.js";import"./use-form-common-props-CIFnak-f.js";import"./isUndefined-DgmxjSXK.js";import"./refs-YhHUIUHt.js";import"./index-Bjpg6xJg.js";import"./vnode-vDTGVjad.js";import"./error-D_Dr4eZ1.js";import"./scroll-CpVn_leR.js";import"./index-BT9cFSrj.js";import"./arrayPush-BKVZZ2H0.js";import"./index-Dkx2ZGWc.js";import"./index-DI9bN5iv.js";var $,I;const O=t(function(){if(I)return $;I=1;var t=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,n="object"==typeof e&&e&&e.Object===Object&&e,o="object"==typeof self&&self&&self.Object===Object&&self,u=n||o||Function("return this")(),s=Object.prototype.toString,v=Math.max,c=Math.min,f=function(){return u.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(p(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=p(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var o=r.test(e);return o||i.test(e)?l(e.slice(2),o?2:8):a.test(e)?NaN:+e}return $=function(e,t,a){var r,i,l,n,o,u,s=0,d=!1,y=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function j(t){var a=r,l=i;return r=i=void 0,s=t,n=e.apply(l,a)}function g(e){var a=e-u;return void 0===u||a>=t||a<0||y&&e-s>=l}function h(){var e=f();if(g(e))return x(e);o=setTimeout(h,function(e){var a=t-(e-u);return y?c(a,l-(e-s)):a}(e))}function x(e){return o=void 0,b&&r?j(e):(r=i=void 0,n)}function k(){var e=f(),a=g(e);if(r=arguments,i=this,u=e,a){if(void 0===o)return function(e){return s=e,o=setTimeout(h,t),d?j(e):n}(u);if(y)return o=setTimeout(h,t),j(u)}return void 0===o&&(o=setTimeout(h,t)),n}return t=m(t)||0,p(a)&&(d=!!a.leading,l=(y="maxWait"in a)?v(m(a.maxWait)||0,t):l,b="trailing"in a?!!a.trailing:b),k.cancel=function(){void 0!==o&&clearTimeout(o),s=0,r=u=i=o=void 0},k.flush=function(){return void 0===o?n:x(f())},k}}()),w={class:"verify-main"},_={key:0,class:"vm-title"},N={key:1,class:"vm-title"},E={class:"get-code"},V={key:0},C={key:1},S={class:"verification-code-inputs"},U=["id","onInput","onKeydown"],W={class:"dialog-footer"},B=T(a({__name:"verificationCode-view",setup(e,{expose:t}){const a=r(!1),T=i({mobile:"",smsType:1,captcha:""});r(null);const $=i({captcha:""}),I=r(!1),B=r(10),D=r(""),F=r(!1),M=r(Array(6).fill("")),P=r(!1),A=r([]),J=()=>{D.value&&clearInterval(D.value),B.value=10,I.value=!1},K=e=>{a.value=!1},Q=O((e=>{if(1===e?$.captcha="":(T.smsType=e,$.captcha=T.captcha,J()),I.value)return P.value=!1,!1;if(!T.mobile)return P.value=!1,l.error("请输入手机号");if(!/^1[3-9]\d{9}$/.test(T.mobile))return P.value=!1,l.error("请输入正确的手机号码");P.value=!0,setTimeout((()=>{P.value=!1,I.value=!0,clearInterval(D.value),D.value=setInterval((()=>{B.value=B.value-1,0===B.value&&(clearInterval(D.value),B.value=10,I.value=!1)}),1e3),l.success(`获取验证码的数据，参数：${JSON.stringify(T)}`)}),1e3)}),1e3,{leading:!0,trailing:!1}),R=()=>{if(!T.mobile)return l.error("请输入手机号");if(!/^1[3-9]\d{9}$/.test(T.mobile))return l.error("请输入正确的手机号码");if(!M.value.every((e=>""!==e)))return l.error("请输入完整的验证码");l.success(`确定的参数：${JSON.stringify(T)}`),a.value=!1};return n((()=>{D.value&&clearInterval(D.value)})),t({init:()=>{a.value=!0,T.mobile="",T.captcha="",T.smsType=1,$.captcha="",g((()=>{M.value=Array(6).fill(""),J(),A.value=M.value.map(((e,t)=>{let a=document.getElementById(`input${t}`);return a?(a.value="",a.blur(),a):null}))}))}}),(e,t)=>{const r=k,i=x,l=h;return u(),o(l,{modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value=e),title:"手机验证码案例",width:"500","before-close":K},{footer:s((()=>[v("div",W,[f(i,{onClick:t[2]||(t[2]=e=>a.value=!1)},{default:s((()=>t[5]||(t[5]=[j("取消")]))),_:1}),f(i,{type:"primary",onClick:R},{default:s((()=>t[6]||(t[6]=[j(" 确定 ")]))),_:1})])])),default:s((()=>[v("div",w,[F.value?(u(),c("div",_,"请完成手机号码验证")):(u(),c("div",N,"请完成手机号码绑定")),t[4]||(t[4]=v("div",{class:"vm-tip"},null,-1)),v("div",E,[f(r,{type:"text",placeholder:"请输入11位手机号码",modelValue:T.mobile,"onUpdate:modelValue":t[0]||(t[0]=e=>T.mobile=e),modelModifiers:{trim:!0},maxlength:"11",clearable:""},null,8,["modelValue"]),f(i,{type:"primary",class:"get-code-btn",onClick:t[1]||(t[1]=e=>p(Q)(1)),disabled:I.value},{default:s((()=>[I.value?(u(),c("span",C,m(B.value)+" 秒后重发",1)):(u(),c("span",V,"获取验证码"))])),_:1},8,["disabled"])]),v("div",S,[(u(!0),c(d,null,y(M.value,((e,t)=>(u(),c("input",{id:`input${t}`,key:t,type:"text",maxlength:"1",onInput:e=>((e,t)=>{const a=t.target.value;a?(M.value[e]=a,e<M.value.length-1&&g((()=>{var t;null==(t=A.value[e+1])||t.focus()}))):M.value[e]="",M.value.every((e=>""!==e))&&(T.captcha=M.value.join(""))})(t,e),onKeydown:b((e=>((e,t)=>{"Backspace"===t.key&&e>0&&!M.value[e]&&g((()=>{var t;null==(t=A.value[e-1])||t.focus()}))})(t,e)),["backspace"]),class:"verification-code-input"},null,40,U)))),128))]),v("div",null,m(P.value?"正在提交...":"其他"),1)])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-d5f96680"]]);export{B as default};
