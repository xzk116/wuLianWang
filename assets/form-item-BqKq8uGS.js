import{a as e,h as t,f as a,d as r}from"./use-form-common-props-CIFnak-f.js";import{c6 as l,co as o,ch as i,c7 as s,cz as n,a9 as u,L as c,bc as d,t as v,z as f,a$ as p,r as b,c as m,_ as g,d as h,b as y,I as j,y as w,S as A,bx as S,g as F,f as I,l as x,n as O,i as B,b9 as W,A as k,o as M,a6 as E,bL as P,ab as $,m as q,P as L,U as V,bm as C,cA as U,J as _,cB as R,C as z,w as N,e as D,h as T,D as G,k as J,a0 as H,F as K,by as Q,q as X,G as Y}from"./index-DaChFCA5.js";import{c as Z}from"./castArray-DTWvRJP_.js";import{d as ee,t as te}from"./error-D_Dr4eZ1.js";import{S as ae}from"./index-BTKOuuO-.js";import{k as re,g as le,s as oe,b as ie,a as se,c as ne,n as ue,i as ce,d as de,e as ve}from"./Uint8Array-CRzaGVrc.js";import{c as fe,k as pe,g as be,a as me,b as ge,d as he,e as ye,i as je}from"./initCloneObject-CqWCJWvq.js";import{a as we}from"./arrayPush-BKVZZ2H0.js";var Ae=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)we(t,le(e)),e=be(e);return t}:oe;function Se(e){return ie(e,pe,Ae)}var Fe=Object.prototype.hasOwnProperty;var Ie=/\w*$/;var xe=l?l.prototype:void 0,Oe=xe?xe.valueOf:void 0;function Be(e,t,a){var r,l,o,i=e.constructor;switch(t){case"[object ArrayBuffer]":return me(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var a=t?me(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ge(e,a);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(o=new(l=e).constructor(l.source,Ie.exec(l))).lastIndex=l.lastIndex,o;case"[object Symbol]":return r=e,Oe?Object(Oe.call(r)):{}}}var We=ue&&ue.isMap,ke=We?ne(We):function(e){return o(e)&&"[object Map]"==se(e)};var Me=ue&&ue.isSet,Ee=Me?ne(Me):function(e){return o(e)&&"[object Set]"==se(e)},Pe="[object Arguments]",$e="[object Function]",qe="[object Object]",Le={};function Ve(e,t,a,r,l,o){var u,c=1&t,d=2&t,v=4&t;if(void 0!==u)return u;if(!i(e))return e;var f=s(e);if(f){if(u=function(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&Fe.call(e,"index")&&(a.index=e.index,a.input=e.input),a}(e),!c)return he(e,u)}else{var p=se(e),b=p==$e||"[object GeneratorFunction]"==p;if(ce(e))return ye(e,c);if(p==qe||p==Pe||b&&!l){if(u=d||b?{}:je(e),!c)return d?function(e,t){return fe(e,Ae(e),t)}(e,function(e,t){return e&&fe(t,pe(t),e)}(u,e)):function(e,t){return fe(e,le(e),t)}(e,function(e,t){return e&&fe(t,re(t),e)}(u,e))}else{if(!Le[p])return l?e:{};u=Be(e,p,c)}}o||(o=new de);var m=o.get(e);if(m)return m;o.set(e,u),Ee(e)?e.forEach((function(r){u.add(Ve(r,t,a,r,e,o))})):ke(e)&&e.forEach((function(r,l){u.set(l,Ve(r,t,a,l,e,o))}));var g=f?void 0:(v?d?Se:ve:d?pe:re)(e);return function(e,t){for(var a=-1,r=null==e?0:e.length;++a<r&&!1!==t(e[a],a,e););}(g||e,(function(r,l){g&&(r=e[l=r]),n(u,l,Ve(r,t,a,l,e,o))})),u}Le[Pe]=Le["[object Array]"]=Le["[object ArrayBuffer]"]=Le["[object DataView]"]=Le["[object Boolean]"]=Le["[object Date]"]=Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Map]"]=Le["[object Number]"]=Le[qe]=Le["[object RegExp]"]=Le["[object Set]"]=Le["[object String]"]=Le["[object Symbol]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le["[object Error]"]=Le[$e]=Le["[object WeakMap]"]=!1;function Ce(e){return Ve(e,4)}const Ue=v({size:{type:String,values:p},disabled:Boolean}),_e=v({...Ue,model:Object,rules:{type:f(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),Re={validate:(e,t,a)=>(u(e)||c(e))&&d(t)&&c(a)};function ze(){const e=b([]),t=m((()=>{if(!e.value.length)return"0";const t=Math.max(...e.value);return t?`${t}px`:""}));function a(a){const r=e.value.indexOf(a);return-1===r&&t.value,r}return{autoLabelWidth:t,registerLabelWidth:function(t,r){if(t&&r){const l=a(r);e.value.splice(l,1,t)}else t&&e.value.push(t)},deregisterLabelWidth:function(t){const r=a(t);r>-1&&e.value.splice(r,1)}}}const Ne=(e,t)=>{const a=Z(t);return a.length>0?e.filter((e=>e.prop&&a.includes(e.prop))):e},De=h({name:"ElForm"});var Te=g(h({...De,props:_e,emits:Re,setup(a,{expose:r,emit:l}){const o=a,i=[],s=e(),n=y("form"),u=m((()=>{const{labelPosition:e,inline:t}=o;return[n.b(),n.m(s.value||"default"),{[n.m(`label-${e}`)]:e,[n.m("inline")]:t}]})),c=(e=[])=>{o.model&&Ne(i,e).forEach((e=>e.resetField()))},d=(e=[])=>{Ne(i,e).forEach((e=>e.clearValidate()))},v=m((()=>!!o.model)),f=async e=>b(void 0,e),p=async(e=[])=>{if(!v.value)return!1;const t=(e=>{if(0===i.length)return[];const t=Ne(i,e);return t.length?t:[]})(e);if(0===t.length)return!0;let a={};for(const l of t)try{await l.validate(""),"error"===l.validateState&&l.resetField()}catch(r){a={...a,...r}}return 0===Object.keys(a).length||Promise.reject(a)},b=async(e=[],t)=>{const a=!W(t);try{const a=await p(e);return!0===a&&await(null==t?void 0:t(a)),a}catch(r){if(r instanceof Error)throw r;const e=r;return o.scrollToError&&g(Object.keys(e)[0]),await(null==t?void 0:t(!1,e)),a&&Promise.reject(e)}},g=e=>{var t;const a=Ne(i,e)[0];a&&(null==(t=a.$el)||t.scrollIntoView(o.scrollIntoViewOptions))};return j((()=>o.rules),(()=>{o.validateOnRuleChange&&f().catch((e=>ee()))}),{deep:!0,flush:"post"}),w(t,A({...S(o),emit:l,resetFields:c,clearValidate:d,validateField:b,getField:e=>i.find((t=>t.prop===e)),addField:e=>{i.push(e)},removeField:e=>{e.prop&&i.splice(i.indexOf(e),1)},...ze()})),r({validate:f,validateField:b,resetFields:c,clearValidate:d,scrollToField:g,fields:i}),(e,t)=>(I(),F("form",{class:O(B(u))},[x(e.$slots,"default")],2))}}),[["__file","form.vue"]]);const Ge=v({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:f([String,Array])},required:{type:Boolean,default:void 0},rules:{type:f([Object,Array])},error:String,validateStatus:{type:String,values:["","error","validating","success"]},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:p}}),Je="ElLabelWrap";var He=h({name:Je,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:r}){const l=k(t,void 0),o=k(a);o||te(Je,"usage: <el-form-item><label-wrap /></el-form-item>");const i=y("form"),s=b(),n=b(0),u=(t="update")=>{V((()=>{r.default&&e.isAutoWidth&&("update"===t?n.value=(()=>{var e;if(null==(e=s.value)?void 0:e.firstElementChild){const e=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(e))}return 0})():"remove"===t&&(null==l||l.deregisterLabelWidth(n.value)))}))},c=()=>u("update");return M((()=>{c()})),E((()=>{u("remove")})),P((()=>c())),j(n,((t,a)=>{e.updateAll&&(null==l||l.registerLabelWidth(t,a))})),$(m((()=>{var e,t;return null!=(t=null==(e=s.value)?void 0:e.firstElementChild)?t:null})),c),()=>{var t,a;if(!r)return null;const{isAutoWidth:u}=e;if(u){const e=null==l?void 0:l.autoLabelWidth,a={};if((null==o?void 0:o.hasLabel)&&e&&"auto"!==e){const t=Math.max(0,Number.parseInt(e,10)-n.value),r=o.labelPosition||l.labelPosition;t&&(a["left"===r?"marginRight":"marginLeft"]=`${t}px`)}return q("div",{ref:s,class:[i.be("item","label-wrap")],style:a},[null==(t=r.default)?void 0:t.call(r)])}return q(L,{ref:s},[null==(a=r.default)?void 0:a.call(r)])}}});const Ke=h({name:"ElFormItem"});var Qe=g(h({...Ke,props:Ge,setup(l,{expose:o}){const i=l,s=C(),n=k(t,void 0),v=k(a,void 0),f=e(void 0,{formItem:!1}),p=y("form-item"),g=r().value,h=b([]),P=b(""),$=U(P,100),L=b(""),X=b();let Y,ee=!1;const te=m((()=>i.labelPosition||(null==n?void 0:n.labelPosition))),re=m((()=>{if("top"===te.value)return{};const e=_(i.labelWidth||(null==n?void 0:n.labelWidth)||"");return e?{width:e}:{}})),le=m((()=>{if("top"===te.value||(null==n?void 0:n.inline))return{};if(!i.label&&!i.labelWidth&&ve)return{};const e=_(i.labelWidth||(null==n?void 0:n.labelWidth)||"");return i.label||s.label?{}:{marginLeft:e}})),oe=m((()=>[p.b(),p.m(f.value),p.is("error","error"===P.value),p.is("validating","validating"===P.value),p.is("success","success"===P.value),p.is("required",me.value||i.required),p.is("no-asterisk",null==n?void 0:n.hideRequiredAsterisk),"right"===(null==n?void 0:n.requireAsteriskPosition)?"asterisk-right":"asterisk-left",{[p.m("feedback")]:null==n?void 0:n.statusIcon,[p.m(`label-${te.value}`)]:te.value}])),ie=m((()=>d(i.inlineMessage)?i.inlineMessage:(null==n?void 0:n.inlineMessage)||!1)),se=m((()=>[p.e("error"),{[p.em("error","inline")]:ie.value}])),ne=m((()=>i.prop?c(i.prop)?i.prop:i.prop.join("."):"")),ue=m((()=>!(!i.label&&!s.label))),ce=m((()=>i.for||(1===h.value.length?h.value[0]:void 0))),de=m((()=>!ce.value&&ue.value)),ve=!!v,fe=m((()=>{const e=null==n?void 0:n.model;if(e&&i.prop)return R(e,i.prop).value})),pe=m((()=>{const{required:e}=i,t=[];i.rules&&t.push(...Z(i.rules));const a=null==n?void 0:n.rules;if(a&&i.prop){const e=R(a,i.prop).value;e&&t.push(...Z(e))}if(void 0!==e){const a=t.map(((e,t)=>[e,t])).filter((([e])=>Object.keys(e).includes("required")));if(a.length>0)for(const[r,l]of a)r.required!==e&&(t[l]={...r,required:e});else t.push({required:e})}return t})),be=m((()=>pe.value.length>0)),me=m((()=>pe.value.some((e=>e.required)))),ge=m((()=>{var e;return"error"===$.value&&i.showMessage&&(null==(e=null==n?void 0:n.showMessage)||e)})),he=m((()=>`${i.label||""}${(null==n?void 0:n.labelSuffix)||""}`)),ye=e=>{P.value=e},je=async e=>{const t=ne.value;return new ae({[t]:e}).validate({[t]:fe.value},{firstFields:!0}).then((()=>(ye("success"),null==n||n.emit("validate",i.prop,!0,""),!0))).catch((e=>((e=>{var t,a;const{errors:r,fields:l}=e;ye("error"),L.value=r?null!=(a=null==(t=null==r?void 0:r[0])?void 0:t.message)?a:`${i.prop} is required`:"",null==n||n.emit("validate",i.prop,!1,L.value)})(e),Promise.reject(e))))},we=async(e,t)=>{if(ee||!i.prop)return!1;const a=W(t);if(!be.value)return null==t||t(!1),!1;const r=(e=>pe.value.filter((t=>!t.trigger||!e||(u(t.trigger)?t.trigger.includes(e):t.trigger===e))).map((({trigger:e,...t})=>t)))(e);return 0===r.length?(null==t||t(!0),!0):(ye("validating"),je(r).then((()=>(null==t||t(!0),!0))).catch((e=>{const{fields:r}=e;return null==t||t(!1,r),!a&&Promise.reject(r)})))},Ae=()=>{ye(""),L.value="",ee=!1},Se=async()=>{const e=null==n?void 0:n.model;if(!e||!i.prop)return;const t=R(e,i.prop);ee=!0,t.value=Ce(Y),await V(),Ae(),ee=!1};j((()=>i.error),(e=>{L.value=e||"",ye(e?"error":"")}),{immediate:!0}),j((()=>i.validateStatus),(e=>ye(e||"")));const Fe=A({...S(i),$el:X,size:f,validateState:P,labelId:g,inputIds:h,isGroup:de,hasLabel:ue,fieldValue:fe,addInputId:e=>{h.value.includes(e)||h.value.push(e)},removeInputId:e=>{h.value=h.value.filter((t=>t!==e))},resetField:Se,clearValidate:Ae,validate:we});return w(a,Fe),M((()=>{i.prop&&(null==n||n.addField(Fe),Y=Ce(fe.value))})),E((()=>{null==n||n.removeField(Fe)})),o({size:f,validateMessage:L,validateState:P,validate:we,clearValidate:Ae,resetField:Se}),(e,t)=>{var a;return I(),F("div",{ref_key:"formItemRef",ref:X,class:O(B(oe)),role:B(de)?"group":void 0,"aria-labelledby":B(de)?B(g):void 0},[q(B(He),{"is-auto-width":"auto"===B(re).width,"update-all":"auto"===(null==(a=B(n))?void 0:a.labelWidth)},{default:N((()=>[B(ue)?(I(),D(G(B(ce)?"label":"div"),{key:0,id:B(g),for:B(ce),class:O(B(p).e("label")),style:J(B(re))},{default:N((()=>[x(e.$slots,"label",{label:B(he)},(()=>[H(K(B(he)),1)]))])),_:3},8,["id","for","class","style"])):T("v-if",!0)])),_:3},8,["is-auto-width","update-all"]),z("div",{class:O(B(p).e("content")),style:J(B(le))},[x(e.$slots,"default"),q(Q,{name:`${B(p).namespace.value}-zoom-in-top`},{default:N((()=>[B(ge)?x(e.$slots,"error",{key:0,error:L.value},(()=>[z("div",{class:O(B(se))},K(L.value),3)])):T("v-if",!0)])),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}}),[["__file","form-item.vue"]]);const Xe=X(Te,{FormItem:Qe}),Ye=Y(Qe);export{Ye as E,Xe as a,Ve as b};
