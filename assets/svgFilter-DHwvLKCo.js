import{d as e,r as l,e as a,f as n,w as t,C as u,g as o,W as i,bi as s,m as r,a0 as p,U as d,aD as m}from"./index-B60e1Ob1.js";import{E as v}from"./dialog-LvtrGeqH.js";import"./overlay-DYY93Q8s.js";import{E as f}from"./button-BQFE7Hxd.js";import{_ as c}from"./plugin-vueexport-helper-BCo6x5W8.js";import"./index-DnpUs-gR.js";import"./refs-CZysbovM.js";import"./index-Y9kMV7A1.js";import"./vnode-G4-cE-sq.js";import"./event-BwRzfsZt.js";import"./error-D_Dr4eZ1.js";import"./scroll-xk3SnB2i.js";import"./use-form-common-props-DzatJoKf.js";import"./isUndefined-DgmxjSXK.js";const g={class:"con"},b={id:"container"},V={id:"controls"},y={class:"channel"},j={class:"channel"},h={class:"channel"},x={id:"filterOutput"},I={width:"0",height:"0"},U={id:"colorize"},w=["tableValues"],C=["tableValues"],G=["tableValues"],_={class:"dialog-footer"},F=c(e({__name:"svgFilter",setup(e,{expose:c}){const F=l(!1),B=l(null),R=l([.17,.61,.1]),k=l([.06,.38,.89]),z=l([.1,.3,.8]),D=l(""),S=()=>{B.value&&(D.value=`\n    <filter id="colorize">\n      <feComponentTransfer>\n        <feFuncR type="table" tableValues="${R.value.join(" ")}"/>\n        <feFuncG type="table" tableValues="${k.value.join(" ")}"/>\n        <feFuncB type="table" tableValues="${z.value.join(" ")}"/>\n      </feComponentTransfer>\n    </filter>`.trim(),B.value.style.filter="url(#colorize)")},T=e=>{F.value=!1};return c({init:()=>{F.value=!0,d((()=>{var e;const l=null==(e=B.value)?void 0:e.getContext("2d");if(!l||!B.value)return;let a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{if(!B.value)return m.error("图片加载失败");B.value.width=a.width,B.value.height=a.height,l.drawImage(a,0,0);const e=l.getImageData(0,0,B.value.width,B.value.height),n=e.data;for(let l=0;l<n.length;l+=4){const e=.2989*n[l]+.587*n[l+1]+.114*n[l+2];n[l]=e,n[l+1]=e,n[l+2]=e}l.putImageData(e,0,0),S()},a.src="https://assets.codepen.io/2045658/man-jogging-bw.jpeg"}))}}),(e,l)=>{const d=f,m=v;return n(),a(m,{modelValue:F.value,"onUpdate:modelValue":l[12]||(l[12]=e=>F.value=e),title:"SVG滤波器",width:"900","before-close":T},{footer:t((()=>[u("div",_,[r(d,{onClick:l[10]||(l[10]=e=>F.value=!1)},{default:t((()=>l[24]||(l[24]=[p("取消")]))),_:1}),r(d,{type:"primary",onClick:l[11]||(l[11]=e=>F.value=!1)},{default:t((()=>l[25]||(l[25]=[p(" 确定 ")]))),_:1})])])),default:t((()=>[u("div",g,[u("div",b,[l[23]||(l[23]=u("h1",null,"灰度到彩色SVG滤镜",-1)),u("canvas",{id:"imageCanvas",ref_key:"imageCanvas",ref:B},null,512),u("div",V,[u("div",y,[l[13]||(l[13]=u("label",null,"Red (暗)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[0]||(l[0]=e=>R.value[0]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,R.value[0]]]),l[14]||(l[14]=u("label",null,"Red (中和)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[1]||(l[1]=e=>R.value[1]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,R.value[1]]]),l[15]||(l[15]=u("label",null,"Red (亮)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[2]||(l[2]=e=>R.value[2]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,R.value[2]]])]),u("div",j,[l[16]||(l[16]=u("label",null,"Green (暗)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[3]||(l[3]=e=>k.value[0]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,k.value[0]]]),l[17]||(l[17]=u("label",null,"Green (中和)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[4]||(l[4]=e=>k.value[1]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,k.value[1]]]),l[18]||(l[18]=u("label",null,"Green (亮)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[5]||(l[5]=e=>k.value[2]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,k.value[2]]])]),u("div",h,[l[19]||(l[19]=u("label",null,"Blue (暗)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[6]||(l[6]=e=>z.value[0]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,z.value[0]]]),l[20]||(l[20]=u("label",null,"Blue (中和)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[7]||(l[7]=e=>z.value[1]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,z.value[1]]]),l[21]||(l[21]=u("label",null,"Blue (亮)",-1)),i(u("input",{type:"range","onUpdate:modelValue":l[8]||(l[8]=e=>z.value[2]=e),min:"0",max:"1",step:"0.01",onInput:S},null,544),[[s,z.value[2]]])])]),u("div",x,[l[22]||(l[22]=u("label",null,"SVG过滤器代码:",-1)),i(u("textarea",{id:"filterCode","onUpdate:modelValue":l[9]||(l[9]=e=>D.value=e),readonly:""},null,512),[[s,D.value]])]),(n(),o("svg",I,[u("defs",null,[u("filter",U,[u("feComponentTransfer",null,[u("feFuncR",{type:"table",tableValues:R.value.join(" ")},null,8,w),u("feFuncG",{type:"table",tableValues:k.value.join(" ")},null,8,C),u("feFuncB",{type:"table",tableValues:z.value.join(" ")},null,8,G)])])])]))])])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-c463c4e8"]]);export{F as default};
