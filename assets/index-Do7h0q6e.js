import{d as e,r as l,S as t,aV as a,c as o,ar as r,g as n,f as s,k as i,i as p,m as u,V as d,w as m,C as c,W as f,e as v,h as g,P as y,Q as b,$ as j,a0 as h,n as k,l as _,F as V,E as x,aD as w,b0 as C,bA as U}from"./index-D7ip52rg.js";import{v as S}from"./loading-DxPw_3Oa.js";import"./popper-BESiP4FJ.js";import{E}from"./popover-BH-ol6cJ.js";import{_ as A}from"./index-CnOE4X2S.js";import{a as N,E as $}from"./table-column-CvTr7kWI.js";import"./checkbox-CjWUz1I7.js";/* empty css                */import"./scrollbar-BkAw2MiZ.js";/* empty css            */import{a as z,E as D}from"./form-item-BlA0YleD.js";import{E as I}from"./button-B7Cpnz14.js";import{E as R}from"./date-picker-DY6DS7lR.js";import{E as K}from"./input-DKRZ9Ufq.js";import{E as M,a as P}from"./select-DsXUxeIp.js";import"./tree-CzFGQOxg.js";import"./text-idL1SFOL.js";import{E as T}from"./tree-select-D-U65GZr.js";import{_ as Y}from"./plugin-vueexport-helper-BCo6x5W8.js";import{_ as q}from"./DictLabel.vuevuetypescriptsetuptruelang-DBBIg43U.js";import{E as F}from"./link-CAsUMmxH.js";import{E as L}from"./index-D_wDnIQN.js";import"./index-CDP4S9XB.js";import"./arrayPush-BjozOkDH.js";import"./index-DTFD3zWA.js";import"./use-form-common-props-DwxMrRCA.js";import"./isUndefined-DgmxjSXK.js";import"./dropdown-Du_2VtkP.js";import"./pagination-R5u_kM9p.js";import"./isEqual-R-_2t1hV.js";import"./Uint8Array-DqRcKjos.js";import"./event-BwRzfsZt.js";import"./index-BxxfRVFK.js";import"./error-D_Dr4eZ1.js";import"./initCloneObject-C46LucBl.js";import"./baseIteratee-DqyYX5Kq.js";import"./debounce-mjMVbbDV.js";import"./index-7fzrV7VL.js";import"./castArray-CEfX6IyU.js";import"./index-BTKOuuO-.js";import"./dayjs.min-B355WD75.js";import"./index-Cfrhvgf0.js";import"./index-BJT6BNQs.js";import"./index-0-wkw8e5.js";import"./token-DWNpOE8r.js";import"./strings-DayrX4yN.js";import"./scroll-BAD_dPbv.js";import"./index-CDOFmm9f.js";const O={class:"feedback"},Q=Y(e({__name:"index",props:{selectConfig:{},text:{default:""}},emits:["confirmClick"],setup(e,{emit:C}){const U=e,Y=C,q=U.selectConfig.pk??"id",F=!0===U.selectConfig.multiple,L=U.selectConfig.width??"100%",Q=U.selectConfig.placeholder??"请选择",W=l(!1),B=l(!1),G=l(0),H=l([]),J=t({pageNum:1,pageSize:10}),X=l(),Z=l(L);a(X,(e=>{Z.value=`${e[0].contentRect.width}px`}));const ee=l();for(const l of U.selectConfig.formItems)J[l.prop]=l.initialValue??"";function le(){var e;null==(e=ee.value)||e.resetFields(),ae(!0)}function te(){ae(!0)}function ae(e=!1){B.value=!0,e&&(J.pageNum=1,J.pageSize=10),U.selectConfig.indexAction(J).then((e=>{G.value=e.total,H.value=e.list})).finally((()=>{B.value=!1}))}const oe=l();for(const l of U.selectConfig.tableColumns)if("selection"===l.type){l.reserveSelection=!0;break}const re=l([]),ne=o((()=>re.value.length>0?`已选(${re.value.length})`:"确 定"));function se(e,l){var t,a,o;F||0===e.length?re.value=e:(re.value=[e[e.length-1]],null==(t=oe.value)||t.clearSelection(),null==(a=oe.value)||a.toggleRowSelection(re.value[0],!0),null==(o=oe.value)||o.setCurrentRow(re.value[0]))}function ie(e){F&&(re.value=e)}function pe(){ae()}const ue=l(!1);function de(){!1===ue.value&&(ue.value=!0,ae())}function me(){0!==re.value.length?(W.value=!1,Y("confirmClick",re.value)):w.error("请选择数据")}function ce(){var e;null==(e=oe.value)||e.clearSelection(),re.value=[]}function fe(){W.value=!1}const ve=l();return(e,l)=>{const t=r("ArrowDown"),a=x,o=K,w=P,C=M,U=T,Y=R,ae=D,re=I,ue=z,ge=$,ye=N,be=A,je=E,he=S;return s(),n("div",{ref_key:"tableSelectRef",ref:X,style:i("width:"+p(L))},[u(je,d({visible:W.value,width:Z.value,placement:"bottom-end"},e.selectConfig.popover,{onShow:de}),{reference:m((()=>[c("div",{onClick:l[0]||(l[0]=e=>W.value=!W.value)},[_(e.$slots,"default",{},(()=>[u(o,{class:"reference","model-value":e.text,readonly:!0,placeholder:p(Q)},{suffix:m((()=>[u(a,{style:i({transform:W.value?"rotate(180deg)":"rotate(0)",transition:"transform .5s"})},{default:m((()=>[u(t)])),_:1},8,["style"])])),_:1},8,["model-value","placeholder"])]),!0)])])),default:m((()=>[c("div",{ref_key:"popoverContentRef",ref:ve},[u(ue,{ref_key:"formRef",ref:ee,model:J,inline:!0},{default:m((()=>[(s(!0),n(y,null,b(e.selectConfig.formItems,(e=>(s(),v(ae,{key:e.prop,label:e.label,prop:e.prop},{default:m((()=>{var l,t;return["input"===e.type?(s(),n(y,{key:0},["number"===(null==(l=e.attrs)?void 0:l.type)?(s(),v(o,d({key:0,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,modelModifiers:{number:!0},ref_for:!0},e.attrs,{onKeyup:j(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(s(),v(o,d({key:1,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,ref_for:!0},e.attrs,{onKeyup:j(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64)):"select"===e.type?(s(),v(C,d({key:1,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,ref_for:!0},e.attrs),{default:m((()=>[(s(!0),n(y,null,b(e.options,(e=>(s(),v(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"tree-select"===e.type?(s(),v(U,d({key:2,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===e.type?(s(),v(Y,d({key:3,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):(s(),n(y,{key:4},["number"===(null==(t=e.attrs)?void 0:t.type)?(s(),v(o,d({key:0,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,modelModifiers:{number:!0},ref_for:!0},e.attrs,{onKeyup:j(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(s(),v(o,d({key:1,modelValue:J[e.prop],"onUpdate:modelValue":l=>J[e.prop]=l,ref_for:!0},e.attrs,{onKeyup:j(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64))]})),_:2},1032,["label","prop"])))),128)),u(ae,null,{default:m((()=>[u(re,{type:"primary",icon:"search",onClick:te},{default:m((()=>l[4]||(l[4]=[h("搜索")]))),_:1}),u(re,{icon:"refresh",onClick:le},{default:m((()=>l[5]||(l[5]=[h("重置")]))),_:1})])),_:1})])),_:1},8,["model"]),f((s(),v(ye,{ref_key:"tableRef",ref:oe,data:H.value,border:!0,"max-height":250,"row-key":p(q),"highlight-current-row":!0,class:k({radio:!F}),onSelect:se,onSelectAll:ie},{default:m((()=>[(s(!0),n(y,null,b(e.selectConfig.tableColumns,(l=>(s(),n(y,{key:l.prop},["custom"===l.templet?(s(),v(ge,d({key:0,ref_for:!0},l),{default:m((t=>[_(e.$slots,l.slotName??l.prop,d({prop:l.prop,ref_for:!0},t),void 0,!0)])),_:2},1040)):(s(),v(ge,d({key:1,ref_for:!0},l),null,16))],64)))),128))])),_:3},8,["data","row-key","class"])),[[he,B.value]]),G.value>0?(s(),v(be,{key:0,total:G.value,"onUpdate:total":l[1]||(l[1]=e=>G.value=e),page:J.pageNum,"onUpdate:page":l[2]||(l[2]=e=>J.pageNum=e),limit:J.pageSize,"onUpdate:limit":l[3]||(l[3]=e=>J.pageSize=e),onPagination:pe},null,8,["total","page","limit"])):g("",!0),c("div",O,[u(re,{type:"primary",size:"small",onClick:me},{default:m((()=>[h(V(ne.value),1)])),_:1}),u(re,{size:"small",onClick:ce},{default:m((()=>l[6]||(l[6]=[h("清 空")]))),_:1}),u(re,{size:"small",onClick:fe},{default:m((()=>l[7]||(l[7]=[h("关 闭")]))),_:1})])],512)])),_:3},16,["visible","width"])],4)}}}),[["__scopeId","data-v-6236b7fc"]]),W={pk:"id",width:"70%",placeholder:"请选择用户",formItems:[{type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"150px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"100px"}},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"date-picker",label:"创建时间",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"240px"}}}],indexAction:function(e){if("createAt"in e){const l=e.createAt;(null==l?void 0:l.length)>1&&(e.startTime=l[0],e.endTime=l[1]),delete e.createAt}return C.getPage(e)},tableColumns:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100},{label:"用户名",align:"center",prop:"username"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"gender",width:100,templet:"custom",slotName:"gender"},{label:"部门",align:"center",prop:"deptName",width:120},{label:"手机号码",align:"center",prop:"mobile",width:120},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180}]},B={class:"app-container"},G=e({__name:"index",setup(e){const t=U(),a=l();function r(e){a.value=e[0]}const i=o((()=>{var e;const l=null==(e=t.getDictItems("gender").find((e=>{var l;return e.value==(null==(l=a.value)?void 0:l.gender)})))?void 0:e.label;return a.value?`${a.value.username} - ${l} - ${a.value.deptName}`:""}));return(e,l)=>{const t=F,a=L,o=q,d=Q;return s(),n("div",B,[u(t,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/table-select/index.vue",type:"primary",target:"_blank",class:"mb-10"},{default:m((()=>l[0]||(l[0]=[h(" 示例源码 请点击>>>> ")]))),_:1}),u(d,{text:p(i),"select-config":p(W),onConfirmClick:r},{status:m((e=>[u(a,{type:1==e.row[e.prop]?"success":"info"},{default:m((()=>[h(V(1==e.row[e.prop]?"启用":"禁用"),1)])),_:2},1032,["type"])])),gender:m((e=>[u(o,{modelValue:e.row.gender,"onUpdate:modelValue":l=>e.row.gender=l,code:"gender"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["text","select-config"])])}}});export{G as default};
